2025-05-11 02:37:57 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 1996 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-11 02:37:57 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-11 02:37:57 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-11 02:38:00 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-11 02:38:00 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-11 02:38:00 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-11 02:38:00 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-11 02:38:00 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3009 ms
2025-05-11 02:38:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-11 02:38:01 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@38c460e8
2025-05-11 02:38:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-11 02:38:01 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/scoot_rent_db_docker_test (PostgreSQL 16.9)
2025-05-11 02:38:01 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.213s)
2025-05-11 02:38:01 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 2.7
2025-05-11 02:38:01 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2025-05-11 02:38:01 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-11 02:38:01 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-11 02:38:01 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-11 02:38:03 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-11 02:38:03 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-11 02:38:05 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-11 02:38:05 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-11 02:38:05 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена DefaultTariffCostStrategy для тарифа с типом: DEFAULT_TARIFF.
2025-05-11 02:38:05 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена SubscriptionCostStrategy$$SpringCGLIB$$0 для тарифа с типом: SUBSCRIPTION.
2025-05-11 02:38:05 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена UserTariffCostStrategy$$SpringCGLIB$$0 для тарифа с типом: SPECIAL_TARIFF.
2025-05-11 02:38:06 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-11 02:38:07 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-11 02:38:07 [main] INFO  r.n.scootrent.ScootRentApplication - Started ScootRentApplication in 11.231 seconds (process running for 12.874)
2025-05-11 02:39:21 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-11 02:39:21 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-11 02:39:21 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-05-11 02:39:22 [http-nio-8080-exec-1] INFO  r.n.s.controller.RentalController - Полученный запрос: POST /start с параметрами: userId=2, scooterId=2, rentalPointId=11.
2025-05-11 02:39:22 [http-nio-8080-exec-1] INFO  r.n.s.s.r.RentalServiceDefaultImpl - Запрос на начало аренды. Пользователь: 2, Самокат: 2, Точка: 11.
2025-05-11 02:39:22 [http-nio-8080-exec-1] INFO  r.n.s.s.r.start.RentalStarterImpl - Начало аренды. Пользователь: 2, Самокат: 2, Точка: 11
2025-05-11 02:39:22 [http-nio-8080-exec-1] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetching Scooter entity by id: 2.
2025-05-11 02:39:22 [http-nio-8080-exec-1] INFO  r.n.s.r.util.BaseRepositoryImpl - Found Scooter entity with id: 2.
2025-05-11 02:39:22 [http-nio-8080-exec-1] WARN  r.n.s.s.r.start.RentalStarterImpl - Самокат с id: 2 не свободен. Текущий статус: TAKEN.
2025-05-11 02:39:22 [http-nio-8080-exec-1] ERROR r.n.s.e.h.GlobalExceptionHandler - Exception occurred: Scooter with id: 2 is not free..
ru.noleg.scootrent.exception.BusinessLogicException: Scooter with id: 2 is not free.
	at ru.noleg.scootrent.service.rental.start.RentalStarterImpl.validateAndGetScooter(RentalStarterImpl.java:90)
	at ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental(RentalStarterImpl.java:55)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.service.rental.start.RentalStarterImpl$$SpringCGLIB$$0.startRental(<generated>)
	at ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental(RentalServiceDefaultImpl.java:45)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl$$SpringCGLIB$$0.startRental(<generated>)
	at ru.noleg.scootrent.controller.RentalController.startRental(RentalController.java:54)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.controller.RentalController$$SpringCGLIB$$0.startRental(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-11 02:40:18 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-11 02:40:18 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-11 02:40:18 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-11 02:40:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-11 02:40:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-11 02:45:50 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 19764 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-11 02:45:50 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-11 02:45:50 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-11 02:45:52 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-11 02:45:52 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-11 02:45:52 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-11 02:45:53 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-11 02:45:53 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2020 ms
2025-05-11 02:45:53 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-11 02:45:53 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@38de5daf
2025-05-11 02:45:53 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-11 02:45:53 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/scoot_rent_db_docker_test (PostgreSQL 16.9)
2025-05-11 02:45:53 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.059s)
2025-05-11 02:45:53 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 2.7
2025-05-11 02:45:53 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2025-05-11 02:45:53 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-11 02:45:53 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-11 02:45:53 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-11 02:45:54 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-11 02:45:54 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-11 02:45:55 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-11 02:45:56 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-11 02:45:56 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена DefaultTariffCostStrategy для тарифа с типом: DEFAULT_TARIFF.
2025-05-11 02:45:56 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена SubscriptionCostStrategy$$SpringCGLIB$$0 для тарифа с типом: SUBSCRIPTION.
2025-05-11 02:45:56 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена UserTariffCostStrategy$$SpringCGLIB$$0 для тарифа с типом: SPECIAL_TARIFF.
2025-05-11 02:45:56 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-11 02:45:56 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-11 02:45:56 [main] INFO  r.n.scootrent.ScootRentApplication - Started ScootRentApplication in 6.722 seconds (process running for 7.769)
2025-05-11 02:46:56 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-11 02:46:56 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-11 02:46:56 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-11 02:46:57 [http-nio-8080-exec-9] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 773 ms
2025-05-11 02:47:28 [http-nio-8080-exec-5] INFO  r.n.s.controller.RentalController - Полученный запрос: POST /start с параметрами: userId=6, scooterId=5, rentalPointId=13.
2025-05-11 02:47:28 [http-nio-8080-exec-5] INFO  r.n.s.s.r.RentalServiceDefaultImpl - Запрос на начало аренды. Пользователь: 6, Самокат: 5, Точка: 13.
2025-05-11 02:47:28 [http-nio-8080-exec-5] INFO  r.n.s.s.r.start.RentalStarterImpl - Начало аренды. Пользователь: 6, Самокат: 5, Точка: 13
2025-05-11 02:47:28 [http-nio-8080-exec-5] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetching Scooter entity by id: 5.
2025-05-11 02:47:28 [http-nio-8080-exec-5] INFO  r.n.s.r.util.BaseRepositoryImpl - Found Scooter entity with id: 5.
2025-05-11 02:47:28 [http-nio-8080-exec-5] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetching User entity by id: 6.
2025-05-11 02:47:28 [http-nio-8080-exec-5] INFO  r.n.s.r.util.BaseRepositoryImpl - Found User entity with id: 6.
2025-05-11 02:47:28 [http-nio-8080-exec-5] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetching LocationNode entity by id: 13.
2025-05-11 02:47:28 [http-nio-8080-exec-5] INFO  r.n.s.r.util.BaseRepositoryImpl - Found LocationNode entity with id: 13.
2025-05-11 02:47:28 [http-nio-8080-exec-5] INFO  r.n.s.s.r.t.TariffSelectionServiceImpl - Поиск подходящего тарифа для пользователя с id: 6.
2025-05-11 02:47:28 [http-nio-8080-exec-5] DEBUG r.n.s.s.r.t.s.SubscriptionTariffStrategy - Выбор тарифа по подписке для пользователя с id: 6.
2025-05-11 02:47:29 [http-nio-8080-exec-5] DEBUG r.n.s.s.r.t.s.UserTariffStrategy - Выбор специального тарифа для пользователя с id: 6.
2025-05-11 02:47:29 [http-nio-8080-exec-5] INFO  r.n.s.s.r.t.TariffSelectionServiceImpl - Выбран тариф Weekly Standard c типом: SPECIAL_TARIFF для пользователя с id: 6.
2025-05-11 02:47:29 [http-nio-8080-exec-5] INFO  r.n.s.r.util.BaseRepositoryImpl - Persisted new Rental entity successfully.
2025-05-11 02:47:29 [http-nio-8080-exec-5] INFO  r.n.s.s.r.start.RentalStarterImpl - Аренда успешно создана. id: 2.
2025-05-11 02:47:29 [http-nio-8080-exec-5] DEBUG r.n.s.controller.RentalController - Аренда начата успешно. rentalId=2.
2025-05-11 03:03:45 [http-nio-8080-exec-10] INFO  r.n.s.controller.RentalController - Полученный запрос: POST /end с параметрами: rentalId=2, endPointId=11.
2025-05-11 03:03:45 [http-nio-8080-exec-10] INFO  r.n.s.s.r.RentalServiceDefaultImpl - Запрос на завершение аренды id: 2, точка: 11.
2025-05-11 03:03:45 [http-nio-8080-exec-10] INFO  r.n.s.s.r.stop.RentalStopperImpl - Завершение аренды ID: 2, точка завершения: 11.
2025-05-11 03:03:45 [http-nio-8080-exec-10] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetching Rental entity by id: 2.
2025-05-11 03:03:45 [http-nio-8080-exec-10] INFO  r.n.s.r.util.BaseRepositoryImpl - Found Rental entity with id: 2.
2025-05-11 03:03:45 [http-nio-8080-exec-10] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetching LocationNode entity by id: 11.
2025-05-11 03:03:45 [http-nio-8080-exec-10] INFO  r.n.s.r.util.BaseRepositoryImpl - Found LocationNode entity with id: 11.
2025-05-11 03:03:45 [http-nio-8080-exec-10] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Расчет стоимости для типа тарифа: SPECIAL_TARIFF.
2025-05-11 03:03:45 [http-nio-8080-exec-10] INFO  r.n.s.s.r.b.s.UserTariffCostStrategy - Расчет стоимости аренды по специальному тарифу для пользователя с id: 6.
2025-05-11 03:03:45 [http-nio-8080-exec-10] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Найден специальный тариф Weekly Standard. Цена за минуту: null, скидка: 50
2025-05-11 03:03:45 [http-nio-8080-exec-10] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Цена за минуту: 4.00000.
2025-05-11 03:03:45 [http-nio-8080-exec-10] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Продолжительность аренды: 16.
2025-05-11 03:03:45 [http-nio-8080-exec-10] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Стоимость аренды (без учета разблокировки): 64.00000
2025-05-11 03:03:45 [http-nio-8080-exec-10] INFO  r.n.s.s.r.b.s.UserTariffCostStrategy - Итоговая стоимость аренды для пользователя с id: 6 = 79.00000.
2025-05-11 03:03:45 [http-nio-8080-exec-10] INFO  r.n.s.r.util.BaseRepositoryImpl - Updated Rental entity successfully with id: 2.
2025-05-11 03:03:45 [http-nio-8080-exec-10] INFO  r.n.s.s.r.stop.RentalStopperImpl - Аренда id: 2 успешно завершена. Стоимость: 79.00000, Длительность: PT16M16.8333979S.
2025-05-11 03:03:45 [http-nio-8080-exec-10] DEBUG r.n.s.controller.RentalController - Аренда окончена: rentalId=2 на точке: endPointId=11.
2025-05-11 03:08:27 [http-nio-8080-exec-8] INFO  r.n.s.c.AdminScooterController - Полученный запрос: GET /5/history
2025-05-11 03:08:27 [http-nio-8080-exec-8] INFO  r.n.s.s.r.RentalServiceDefaultImpl - Запрос истории аренд для самоката id: 5.
2025-05-11 03:08:27 [http-nio-8080-exec-8] DEBUG r.n.s.c.AdminScooterController - Получено 1 записей истории аренды для самоката с id 5.
2025-05-11 03:09:33 [http-nio-8080-exec-5] INFO  r.n.s.controller.UserController - Полученный запрос: GET /6/history получение истории аренды пользователя.
2025-05-11 03:09:33 [http-nio-8080-exec-5] INFO  r.n.s.s.r.RentalServiceDefaultImpl - Запрос истории аренд для пользователя id: 6.
2025-05-11 03:09:33 [http-nio-8080-exec-5] DEBUG r.n.s.controller.UserController - Получено 1 записей истории аренды для пользователя с id 6.
2025-05-11 03:10:03 [http-nio-8080-exec-6] INFO  r.n.s.controller.ScooterController - Полученный запрос: GET получения всех самокатов.
2025-05-11 03:10:03 [http-nio-8080-exec-6] INFO  r.n.s.s.s.ScooterServiceDefaultImpl - Получение всех самокатов
2025-05-11 03:10:03 [http-nio-8080-exec-6] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetching all Scooter entities...
2025-05-11 03:10:03 [http-nio-8080-exec-6] INFO  r.n.s.r.util.BaseRepositoryImpl - Fetched 5 Scooter entities.
2025-05-11 03:10:03 [http-nio-8080-exec-6] INFO  r.n.s.s.s.ScooterServiceDefaultImpl - Получено 5 самокатов
2025-05-11 03:10:03 [http-nio-8080-exec-6] DEBUG r.n.s.controller.ScooterController - Получено самокатов: 5.
2025-05-11 03:13:43 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-11 03:13:43 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-11 03:13:43 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-11 03:13:43 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-11 03:13:43 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-11 03:13:47 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 21104 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-11 03:13:47 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-11 03:13:47 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-11 03:13:49 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-11 03:13:49 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-11 03:13:49 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-11 03:13:49 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-11 03:13:49 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1364 ms
2025-05-11 03:13:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-11 03:13:49 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1ccc1026
2025-05-11 03:13:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-11 03:13:49 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/scoot_rent_db_docker_test (PostgreSQL 16.9)
2025-05-11 03:13:49 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.056s)
2025-05-11 03:13:49 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 2.7
2025-05-11 03:13:49 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2025-05-11 03:13:49 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-11 03:13:49 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-11 03:13:49 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-11 03:13:50 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-11 03:13:50 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-11 03:13:51 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-11 03:13:51 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-11 03:13:51 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена DefaultTariffCostStrategy для тарифа с типом: DEFAULT_TARIFF.
2025-05-11 03:13:51 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена SubscriptionCostStrategy$$SpringCGLIB$$0 для тарифа с типом: SUBSCRIPTION.
2025-05-11 03:13:51 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена UserTariffCostStrategy$$SpringCGLIB$$0 для тарифа с типом: SPECIAL_TARIFF.
2025-05-11 03:13:51 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-11 03:13:52 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-11 03:13:52 [main] INFO  r.n.scootrent.ScootRentApplication - Started ScootRentApplication in 5.047 seconds (process running for 5.873)
2025-05-11 03:14:02 [http-nio-8080-exec-5] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-11 03:14:02 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-11 03:14:02 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-05-11 03:14:02 [http-nio-8080-exec-5] INFO  r.n.s.controller.ScooterController - Полученный запрос: GET получения всех самокатов.
2025-05-11 03:14:02 [http-nio-8080-exec-5] INFO  r.n.s.s.s.ScooterServiceDefaultImpl - Получение всех самокатов
2025-05-11 03:14:02 [http-nio-8080-exec-5] DEBUG r.n.s.r.util.BaseRepositoryImpl - Получение всех сущностей Scooter.
2025-05-11 03:14:02 [http-nio-8080-exec-5] INFO  r.n.s.r.util.BaseRepositoryImpl - Найдено 5 Scooter сущностей.
2025-05-11 03:14:02 [http-nio-8080-exec-5] INFO  r.n.s.s.s.ScooterServiceDefaultImpl - Получено 5 самокатов
2025-05-11 03:14:02 [http-nio-8080-exec-5] ERROR r.n.s.e.h.GlobalExceptionHandler - Exception occurred: Handler dispatch failed: java.lang.NoSuchMethodError: 'void ru.noleg.scootrent.dto.scooter.ScooterDto.<init>(java.lang.Long, java.lang.String, ru.noleg.scootrent.entity.scooter.ScooterStatus, java.lang.Long, java.lang.Long)'.
jakarta.servlet.ServletException: Handler dispatch failed: java.lang.NoSuchMethodError: 'void ru.noleg.scootrent.dto.scooter.ScooterDto.<init>(java.lang.Long, java.lang.String, ru.noleg.scootrent.entity.scooter.ScooterStatus, java.lang.Long, java.lang.Long)'
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1104)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.NoSuchMethodError: 'void ru.noleg.scootrent.dto.scooter.ScooterDto.<init>(java.lang.Long, java.lang.String, ru.noleg.scootrent.entity.scooter.ScooterStatus, java.lang.Long, java.lang.Long)'
	at ru.noleg.scootrent.mapper.ScooterMapperImpl.mapToDto(ScooterMapperImpl.java:115)
	at ru.noleg.scootrent.mapper.ScooterMapperImpl.mapToDtos(ScooterMapperImpl.java:142)
	at ru.noleg.scootrent.controller.ScooterController.getAllScooters(ScooterController.java:112)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.controller.ScooterController$$SpringCGLIB$$0.getAllScooters(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	... 39 common frames omitted
2025-05-11 03:14:10 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-11 03:14:10 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-11 03:14:10 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-11 03:14:10 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-11 03:14:10 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-11 03:14:31 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 21.0.4 with PID 21240 (started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-11 03:14:31 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-11 03:14:31 [main] INFO  r.n.s.ScootRentApplicationTests - No active profile set, falling back to 1 default profile: "default"
2025-05-11 03:14:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-11 03:14:33 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4357524b
2025-05-11 03:14:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-11 03:14:33 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/scoot_rent_db_docker_test (PostgreSQL 16.9)
2025-05-11 03:14:33 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.069s)
2025-05-11 03:14:33 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 2.7
2025-05-11 03:14:33 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2025-05-11 03:14:33 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-11 03:14:33 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-11 03:14:34 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-11 03:14:34 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-11 03:14:34 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-11 03:14:35 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-11 03:14:35 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-11 03:14:35 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена DefaultTariffCostStrategy для тарифа с типом: DEFAULT_TARIFF.
2025-05-11 03:14:35 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена SubscriptionCostStrategy$$SpringCGLIB$$0 для тарифа с типом: SUBSCRIPTION.
2025-05-11 03:14:35 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена UserTariffCostStrategy$$SpringCGLIB$$0 для тарифа с типом: SPECIAL_TARIFF.
2025-05-11 03:14:36 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-11 03:14:37 [main] INFO  r.n.s.ScootRentApplicationTests - Started ScootRentApplicationTests in 6.134 seconds (process running for 7.403)
2025-05-11 03:14:37 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-11 03:14:37 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-11 03:14:37 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-11 03:14:47 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 9948 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-11 03:14:47 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-11 03:14:47 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-11 03:14:48 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-11 03:14:48 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-11 03:14:48 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-11 03:14:48 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-11 03:14:48 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1345 ms
2025-05-11 03:14:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-11 03:14:49 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@77fc19cf
2025-05-11 03:14:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-11 03:14:49 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/scoot_rent_db_docker_test (PostgreSQL 16.9)
2025-05-11 03:14:49 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.052s)
2025-05-11 03:14:49 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 2.7
2025-05-11 03:14:49 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2025-05-11 03:14:49 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-11 03:14:49 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-11 03:14:49 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-11 03:14:50 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-11 03:14:50 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-11 03:14:51 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-11 03:14:51 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-11 03:14:51 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена DefaultTariffCostStrategy для тарифа с типом: DEFAULT_TARIFF.
2025-05-11 03:14:51 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена SubscriptionCostStrategy$$SpringCGLIB$$0 для тарифа с типом: SUBSCRIPTION.
2025-05-11 03:14:51 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Стратегия добавлена UserTariffCostStrategy$$SpringCGLIB$$0 для тарифа с типом: SPECIAL_TARIFF.
2025-05-11 03:14:51 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-11 03:14:52 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-11 03:14:52 [main] INFO  r.n.scootrent.ScootRentApplication - Started ScootRentApplication in 5.182 seconds (process running for 6.035)
2025-05-11 03:15:03 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-11 03:15:03 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-11 03:15:03 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-11 03:15:03 [http-nio-8080-exec-1] INFO  r.n.s.controller.ScooterController - Полученный запрос: GET получения всех самокатов.
2025-05-11 03:15:03 [http-nio-8080-exec-1] INFO  r.n.s.s.s.ScooterServiceDefaultImpl - Получение всех самокатов
2025-05-11 03:15:03 [http-nio-8080-exec-1] DEBUG r.n.s.r.util.BaseRepositoryImpl - Получение всех сущностей Scooter.
2025-05-11 03:15:03 [http-nio-8080-exec-1] INFO  r.n.s.r.util.BaseRepositoryImpl - Найдено 5 Scooter сущностей.
2025-05-11 03:15:03 [http-nio-8080-exec-1] INFO  r.n.s.s.s.ScooterServiceDefaultImpl - Получено 5 самокатов
2025-05-11 03:15:03 [http-nio-8080-exec-1] DEBUG r.n.s.controller.ScooterController - Получено самокатов: 5.
2025-05-11 03:15:42 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-11 03:15:42 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-11 03:15:42 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-11 03:15:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-11 03:15:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
