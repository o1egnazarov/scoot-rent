2025-05-20 01:41:33 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 17.0.14 with PID 32808 (started by oleg_sandr in /mnt/c/Users/nazar/java-project/scoot-rent)
2025-05-20 01:41:33 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 01:41:33 [main] INFO  r.n.s.ScootRentApplicationTests - No active profile set, falling back to 1 default profile: "default"
2025-05-20 01:41:51 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 01:41:52 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 01:41:53 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 01:41:57 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 01:41:58 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 01:42:00 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 3D000
2025-05-20 01:42:00 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - FATAL: database "scootrent_db" does not exist
2025-05-20 01:42:00 [main] WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata
org.hibernate.exception.GenericJDBCException: unable to obtain isolated JDBC connection [FATAL: database "scootrent_db" does not exist] [n/a]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:63)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:116)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:320)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:129)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:81)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215)
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:226)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:194)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:171)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1442)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1513)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.postgresql.util.PSQLException: FATAL: database "scootrent_db" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.readStartupMessages(QueryExecutorImpl.java:2845)
	at org.postgresql.core.v3.QueryExecutorImpl.<init>(QueryExecutorImpl.java:176)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:323)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:467)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:61)
	... 115 common frames omitted
2025-05-20 01:42:00 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set 'jakarta.persistence.jdbc.url' for common cases or 'hibernate.dialect' when a custom Dialect implementation must be provided)
2025-05-20 01:42:00 [main] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set 'jakarta.persistence.jdbc.url' for common cases or 'hibernate.dialect' when a custom Dialect implementation must be provided)
2025-05-20 01:42:00 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 01:42:00 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set 'jakarta.persistence.jdbc.url' for common cases or 'hibernate.dialect' when a custom Dialect implementation must be provided)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set 'jakarta.persistence.jdbc.url' for common cases or 'hibernate.dialect' when a custom Dialect implementation must be provided)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:276)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215)
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:226)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:194)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:171)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1442)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1513)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 95 common frames omitted
Caused by: org.hibernate.HibernateException: Unable to determine Dialect without JDBC metadata (please set 'jakarta.persistence.jdbc.url' for common cases or 'hibernate.dialect' when a custom Dialect implementation must be provided)
	at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:191)
	at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:87)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentWithDefaults(JdbcEnvironmentInitiator.java:181)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:392)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:129)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:81)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)
	... 110 common frames omitted
2025-05-20 01:42:00 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.noleg.scootrent.ScootRentApplicationTests@1722ede1]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6c4c32ff testClass = ru.noleg.scootrent.ScootRentApplicationTests, locations = [], classes = [ru.noleg.scootrent.ScootRentApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5c4cc644, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@706f6d26, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@233f52f8, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@6424e613, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@e62319f, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@7b18658a, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@62d97995], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set 'jakarta.persistence.jdbc.url' for common cases or 'hibernate.dialect' when a custom Dialect implementation must be provided)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 75 common frames omitted
Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set 'jakarta.persistence.jdbc.url' for common cases or 'hibernate.dialect' when a custom Dialect implementation must be provided)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:276)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215)
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:226)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:194)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:171)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1442)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1513)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 95 common frames omitted
Caused by: org.hibernate.HibernateException: Unable to determine Dialect without JDBC metadata (please set 'jakarta.persistence.jdbc.url' for common cases or 'hibernate.dialect' when a custom Dialect implementation must be provided)
	at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:191)
	at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:87)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentWithDefaults(JdbcEnvironmentInitiator.java:181)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:392)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:129)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:81)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)
	... 110 common frames omitted
2025-05-20 01:42:00 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:42:00 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User successfully signUp with id: 1.
2025-05-20 01:42:00 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:42:00 [main] ERROR r.n.s.s.a.AuthenticationServiceJwtImpl - User with email email@gmail.com already exists.
2025-05-20 01:42:00 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:42:00 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User: user, successfully signIn.
2025-05-20 01:42:00 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:42:00 [main] ERROR r.n.s.s.a.AuthenticationServiceJwtImpl - User with username user already exists.
2025-05-20 01:42:00 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:42:00 [main] ERROR r.n.s.s.a.AuthenticationServiceJwtImpl - User with phone 123456789 already exists.
2025-05-20 01:42:00 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 1 locations.
2025-05-20 01:42:01 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 1 locations.
2025-05-20 01:42:01 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Deleting location with id: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Location with id: 1 successfully deleted.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Adding new location: null.
2025-05-20 01:42:01 [main] ERROR r.n.s.s.location.LocationServiceImpl - Parent location with id: 100 not found
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Searching location by coordinates: 56.465390, 84.950164 and type: CITY.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 100 and type: CITY.
2025-05-20 01:42:01 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with id:100 and type: CITY - not found.
2025-05-20 01:42:01 [main] ERROR r.n.s.s.location.LocationServiceImpl - Failed to get all locations.
java.lang.RuntimeException: DB error
	at ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations(LocationServiceImpl.java:117)
	at ru.noleg.scootrent.service.location.LocationServiceImplTest.lambda$getAllLocations_shouldThrowServiceException_whenRepositoryFails$5(LocationServiceImplTest.java:339)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.location.LocationServiceImplTest.getAllLocations_shouldThrowServiceException_whenRepositoryFails(LocationServiceImplTest.java:338)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Searching location by coordinates: 56.465390, 84.950164 and type: CITY.
2025-05-20 01:42:01 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with coordinates: 56.465390, 84.950164 and type: CITY not found.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 0 locations.
2025-05-20 01:42:01 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 0.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 3 locations.
2025-05-20 01:42:01 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 1 and type: CITY.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Adding new location: null.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Location successfully added. Id: 5, Title: null.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 100.
2025-05-20 01:42:01 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with id: 100 not found.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching child locations for parent id: 1.
2025-05-20 01:42:01 [main] INFO  r.n.s.s.location.LocationServiceImpl - Found 1 child locations for parent id: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Deleting location with id: 100.
2025-05-20 01:42:01 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with id: 100 does not exist.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$u1fGCj3X for tariff with type: DEFAULT_TARIFF.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$u1fGCj3X for tariff with type: SUBSCRIPTION.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Calculation of the cost for tariff type: SPECIAL_TARIFF.
2025-05-20 01:42:01 [main] ERROR r.n.s.s.r.billing.BillingServiceImpl - Tariff with type: SPECIAL_TARIFF unsupported.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$u1fGCj3X for tariff with type: DEFAULT_TARIFF.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$u1fGCj3X for tariff with type: SUBSCRIPTION.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$u1fGCj3X for tariff with type: DEFAULT_TARIFF.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$u1fGCj3X for tariff with type: DEFAULT_TARIFF.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$u1fGCj3X for tariff with type: SUBSCRIPTION.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Calculation of the cost for tariff type: DEFAULT_TARIFF.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: null for user with id: 0. 
2025-05-20 01:42:01 [main] ERROR r.n.s.s.r.b.s.DefaultTariffCostStrategy - Error in calculate cost by default tariff: null.
java.lang.NullPointerException: Tariff is null
	at ru.noleg.scootrent.entity.tariff.Tariff.getPricePerUnit(Tariff.java:122)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategy.calculateFinalCost(DefaultTariffCostStrategy.java:43)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategy.calculate(DefaultTariffCostStrategy.java:35)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategyTest.lambda$calculate_shouldWrapExceptionInCostCalculationException_whenInternalErrorOccurs$0(DefaultTariffCostStrategyTest.java:156)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategyTest.calculate_shouldWrapExceptionInCostCalculationException_whenInternalErrorOccurs(DefaultTariffCostStrategyTest.java:155)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 200, duration: PT45M, unlock fee: 25.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Long ride detected (>30 min). Applying discount: x0.8.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 145.000.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 3.0, duration: PT45M, unlock fee: 25.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 160.0.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 3.0, duration: PT5M, unlock fee: 25.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 40.0.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 200, duration: PT5M, unlock fee: 25.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Short ride detected (<10 min). Applying surcharge: x1.2.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 44.200.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Found subscription ErrorTariff. Total free minutes: 50, used: 45
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Minutes left on subscription: 5, minutes requested: 10.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Updated subscription used: +10 minutes.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Limit exceeded by 5
2025-05-20 01:42:01 [main] ERROR r.n.s.s.r.b.s.SubscriptionCostStrategy - Error in calculate cost by subscription ErrorTariff.
java.lang.NullPointerException: Cannot read field "scale" because "multiplicand" is null
	at java.base/java.math.BigDecimal.multiply(BigDecimal.java:1572)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculateFinalCost(SubscriptionCostStrategy.java:88)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate(SubscriptionCostStrategy.java:54)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategyTest.lambda$calculate_shouldThrowCostCalculationException_whenExceptionOccurs$1(SubscriptionCostStrategyTest.java:158)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategyTest.calculate_shouldThrowCostCalculationException_whenExceptionOccurs(SubscriptionCostStrategyTest.java:157)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Found subscription Premium. Total free minutes: 50, used: 45
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Minutes left on subscription: 5, minutes requested: 10.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Updated subscription used: +10 minutes.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Limit exceeded by 5
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Total rental cost for user with id: 1 = 12.5.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 01:42:01 [main] ERROR r.n.s.s.r.b.s.SubscriptionCostStrategy - Subscription for user with id: 1 not found.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Found subscription Gold. Total free minutes: 100, used: 50
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Minutes left on subscription: 50, minutes requested: 30.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Updated subscription used: +30 minutes.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Rental within the subscription.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Total rental cost for user with id: 1 = 0.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Found special tariff Silver. Price per minute: 3.0, discount: null.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Duration rental: 20.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Rental cost (without unlock fee): 60.0
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Total rental cost for user with id: 1 = 65.0.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 01:42:01 [main] ERROR r.n.s.s.r.b.s.UserTariffCostStrategy - Special tariff for user with id: 1 not found.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Found special tariff Gold. Price per minute: 2.5, discount: 10.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Price per minute: 2.25.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Duration rental: 30.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Rental cost (without unlock fee): 67.50
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Total rental cost for user with id: 1 = 72.50.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Found special tariff Silver. Price per minute: null, discount: 10.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Price per minute: 2.25.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Duration rental: 20.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Rental cost (without unlock fee): 45.00
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Total rental cost for user with id: 1 = 50.00.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.pause.RentalPauserImpl - Rental status: ACTIVE.
2025-05-20 01:42:01 [main] DEBUG r.n.s.s.r.pause.RentalPauserImpl - Rental with id: 1 successfully pause. Pause time: null.
2025-05-20 01:42:01 [main] WARN  r.n.s.s.r.pause.RentalPauserImpl - Attempt pause already completed rental with id: 1.
2025-05-20 01:42:01 [main] WARN  r.n.s.s.r.pause.RentalPauserImpl - Attempt pause already pause rental with id: 1.
2025-05-20 01:42:01 [main] ERROR r.n.s.s.r.pause.RentalPauserImpl - Rental with id: 1 not found.
2025-05-20 01:42:02 [main] INFO  r.n.s.s.r.RentalServiceDefaultImpl - Get rental history for user with id: 1.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Pauser rental with id: 1.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Stop rental with id: 1, rental point: 5.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Get all rentals.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Start rental. User: 1, Scooter: 2, RentalPoint: 3.
2025-05-20 01:42:02 [main] INFO  r.n.s.s.r.RentalServiceDefaultImpl - Get rental history for scooter with id: 1.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Resume rental with id: 1.
2025-05-20 01:42:02 [main] ERROR r.n.s.s.r.resume.RentalResumerImpl - Rental with id: 1 not found.
2025-05-20 01:42:02 [main] WARN  r.n.s.s.r.resume.RentalResumerImpl - Attempt resume rental with id: 1, in rental status: ACTIVE
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.resume.RentalResumerImpl - Rental with id: 1 successfully resume. Total pause time: PT0S
2025-05-20 01:42:02 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - Scooter with id: 2 is not at the rental point with id: 3.
2025-05-20 01:42:02 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - Scooter with id: 2 is not free. Scooter status: TAKEN.
2025-05-20 01:42:02 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - Location with id: 3 not found.
2025-05-20 01:42:02 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - User with id: 1 already has active rent.
2025-05-20 01:42:02 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - Location with id: 3 is not a rental point. Its type: CITY.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.start.RentalStarterImpl - Rental successfully created with id: 100.
2025-05-20 01:42:02 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - Scooter with id: 2 not found.
2025-05-20 01:42:02 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - Error in select tariff for user with id: 1
ru.noleg.scootrent.exception.ServiceException: Something went wrong
	at ru.noleg.scootrent.service.rental.start.RentalStarterImpl.selectTariff(RentalStarterImpl.java:72)
	at ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental(RentalStarterImpl.java:61)
	at ru.noleg.scootrent.service.rental.start.RentalStarterImplTest.lambda$startRental_shouldThrowServiceException_whenTariffSelectFails$8(RentalStarterImplTest.java:302)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.start.RentalStarterImplTest.startRental_shouldThrowServiceException_whenTariffSelectFails(RentalStarterImplTest.java:301)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:42:02 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - User with id: 1 not found.
2025-05-20 01:42:02 [main] WARN  r.n.s.s.r.stop.RentalStopperImpl - Rental with id: 1 already completed.
2025-05-20 01:42:02 [main] ERROR r.n.s.s.r.stop.RentalStopperImpl - Error in calculate cost for rental with id: 1
java.lang.RuntimeException: Billing failure
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.calculateCost(RentalStopperImpl.java:97)
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental(RentalStopperImpl.java:52)
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImplTest.lambda$stopRental_shouldThrowServiceException_whenBillingServiceFails$4(RentalStopperImplTest.java:192)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImplTest.stopRental_shouldThrowServiceException_whenBillingServiceFails(RentalStopperImplTest.java:191)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:42:02 [main] ERROR r.n.s.s.r.stop.RentalStopperImpl - Rental with id: 1 not found.
2025-05-20 01:42:02 [main] ERROR r.n.s.s.r.stop.RentalStopperImpl - Rental end point with id: 2 not found.
2025-05-20 01:42:02 [main] WARN  r.n.s.s.r.stop.RentalStopperImpl - Location with id: 2 is not a rental point.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.stop.RentalStopperImpl - Rental with id: 1 successfully stopped. Cost: 42.00, Duration: PT50M0.001452856S.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.t.s.DefaultTariffStrategy - Selecting default tariff for user with id: 1, by: PER_HOUR.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.t.s.DefaultTariffStrategy - Selecting default tariff for user with id: 1, by: PER_HOUR.
2025-05-20 01:42:02 [main] ERROR r.n.s.s.r.t.s.DefaultTariffStrategy - For user with id: 1 not found default tariff.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.t.s.SubscriptionTariffStrategy - Selecting subscription for user with id: 1.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.t.s.SubscriptionTariffStrategy - Selecting subscription for user with id: 100.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.t.s.UserTariffStrategy - Selecting special tariff for user with id: 100.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.t.s.UserTariffStrategy - Selecting special tariff for user with id: 1.
2025-05-20 01:42:02 [main] INFO  r.n.s.s.r.t.TariffSelectionServiceImpl - Search for a suitable tariff for the user with id: 1.
2025-05-20 01:42:02 [main] ERROR r.n.s.s.r.t.TariffSelectionServiceImpl - No tariff found for user with id: 1.
2025-05-20 01:42:02 [main] INFO  r.n.s.s.r.t.TariffSelectionServiceImpl - Search for a suitable tariff for the user with id: 1.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.r.t.TariffSelectionServiceImpl - Select tariff Default tariff with type: DEFAULT_TARIFF for user with id: 1.
2025-05-20 01:42:02 [main] INFO  r.n.s.s.r.t.TariffSelectionServiceImpl - Search for a suitable tariff for the user with id: 2.
2025-05-20 01:42:02 [main] WARN  r.n.s.s.r.t.TariffSelectionServiceImpl - Error in selection tariff TariffSelectionStrategy$MockitoMock$2ev8umKX for user with id: 2.
java.lang.RuntimeException: Unexpected failure
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImpl.lambda$selectTariffForUser$0(TariffSelectionServiceImpl.java:36)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602)
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647)
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImpl.selectTariffForUser(TariffSelectionServiceImpl.java:44)
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImplTest.lambda$selectTariffForUser_shouldThrowTariffSelectionException_whenStrategyFails$0(TariffSelectionServiceImplTest.java:65)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImplTest.selectTariffForUser_shouldThrowTariffSelectionException_whenStrategyFails(TariffSelectionServiceImplTest.java:64)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Adding scooter model null.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Model with id: 1 successfully added.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Deleting scooter model with id: 100.
2025-05-20 01:42:02 [main] WARN  r.n.s.s.s.ScooterModelServiceImpl - Scooter model with id: 100 not found.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Fetching all scooter models.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Got 2 scooter models.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Fetching scooter model by id: 2.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Deleting scooter model with id: 1.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Model with id: 1 successfully deleted.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Fetching scooter model by id: 100.
2025-05-20 01:42:02 [main] ERROR r.n.s.s.s.ScooterModelServiceImpl - Scooter model with id: 100 not found.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: ABC123.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Scooter successfully added with id: 10.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Fetching scooter with id: 100.
2025-05-20 01:42:02 [main] ERROR r.n.s.s.s.ScooterServiceDefaultImpl - Scooter with id: 100 not found.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: null.
2025-05-20 01:42:02 [main] ERROR r.n.s.s.s.ScooterServiceDefaultImpl - Scooter model with id: 100 not found.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: null.
2025-05-20 01:42:02 [main] WARN  r.n.s.s.s.ScooterServiceDefaultImpl - Location with id:2 is not a rental point.
2025-05-20 01:42:02 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Deleting scooter with id: 100.
2025-05-20 01:42:02 [main] WARN  r.n.s.s.s.ScooterServiceDefaultImpl - Scooter with id: 100 not found.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Fetching scooter with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: null.
2025-05-20 01:42:03 [main] ERROR r.n.s.s.s.ScooterServiceDefaultImpl - Location with id: 100 not found.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Deleting scooter with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Scooter with id: 1 successfully deleted.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Fetching all scooters.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Got 2 scooters.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Subscription 2 successfully assigned to user with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:42:03 [main] WARN  r.n.s.s.t.SubscriptionServiceImpl - Tariff with id: 2 is not a subscription and cannot assigned.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:42:03 [main] WARN  r.n.s.s.t.SubscriptionServiceImpl - User already been assigned a subscription with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:42:03 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - User with id: 1 not found.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Cansel subscription from user 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Subscription 2 successfully canselt.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:42:03 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - Tariff with id: 2 not found.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Cansel subscription from user 1.
2025-05-20 01:42:03 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - Subscription not found for user with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:42:03 [main] WARN  r.n.s.s.t.SubscriptionServiceImpl - Tariff with id: 2 is not active.
2025-05-20 01:42:03 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - Subscription not found for user with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:42:03 [main] WARN  r.n.s.s.t.TariffAssignmentServiceImpl - Tariff with id: 2 is not active.
2025-05-20 01:42:03 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - Special tariff not found for user with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:42:03 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - User with id: 1 not found.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Cansel tariff from user 1.
2025-05-20 01:42:03 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - Special tariff not found for user with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:42:03 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - Tariff with id: 2 not found.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:42:03 [main] WARN  r.n.s.s.t.TariffAssignmentServiceImpl - User already been assigned a special tariff with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:42:03 [main] WARN  r.n.s.s.t.TariffAssignmentServiceImpl - Tariff with id: 2 is a subscription and cannot assigned.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Tariff 2 successfully assigned to user 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Cansel tariff from user 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Tariff 2 successfully canselt.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Activating tariff with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 01:42:03 [main] WARN  r.n.s.s.tariff.TariffServiceImpl - Tariff already activated.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Creating tariff: null.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Tariff created with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 100.
2025-05-20 01:42:03 [main] ERROR r.n.s.s.tariff.TariffServiceImpl - Tariff with id: 100 not found.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching list active tariffs.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Got 2 active tariffs.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching list tariffs.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Deactivating tariff with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 01:42:03 [main] WARN  r.n.s.s.tariff.TariffServiceImpl - Tariff already deactivated.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Deactivating tariff with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Tariff with id 1 successfully deactivated.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Activating tariff with id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 01:42:03 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Tariff with id 1 successfully activated.
2025-05-20 01:42:03 [main] ERROR r.n.s.s.user.UserDetailsServiceImpl - User with username: notfound not found.
2025-05-20 01:50:33 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 17.0.14 with PID 35501 (started by oleg_sandr in /mnt/c/Users/nazar/java-project/scoot-rent)
2025-05-20 01:50:33 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 01:50:33 [main] INFO  r.n.s.ScootRentApplicationTests - The following 1 profile is active: "test"
2025-05-20 01:50:50 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 01:50:51 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 01:50:52 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 01:50:56 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 01:50:56 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 01:50:58 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-05-20 01:50:58 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 01:50:59 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 01:51:08 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 01:51:09 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
2025-05-20 01:51:09 [main] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
2025-05-20 01:51:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 01:51:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 01:51:09 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 01:51:09 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 95 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:136)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:99)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:77)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:289)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 99 common frames omitted
2025-05-20 01:51:09 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.noleg.scootrent.ScootRentApplicationTests@3b3639f9]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@318ff889 testClass = ru.noleg.scootrent.ScootRentApplicationTests, locations = [], classes = [ru.noleg.scootrent.ScootRentApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@320be73, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2c1d57bc, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3c7b137a, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@2c9d90fc, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@3d3c886f, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@4f114b, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@1a20c14b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 75 common frames omitted
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 95 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:136)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:99)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:77)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:289)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 99 common frames omitted
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User successfully signUp with id: 1.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:51:10 [main] ERROR r.n.s.s.a.AuthenticationServiceJwtImpl - User with email email@gmail.com already exists.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User: user, successfully signIn.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:51:10 [main] ERROR r.n.s.s.a.AuthenticationServiceJwtImpl - User with username user already exists.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:51:10 [main] ERROR r.n.s.s.a.AuthenticationServiceJwtImpl - User with phone 123456789 already exists.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 1 locations.
2025-05-20 01:51:10 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 1.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 1 locations.
2025-05-20 01:51:10 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 1.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Deleting location with id: 1.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Location with id: 1 successfully deleted.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 1.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Adding new location: null.
2025-05-20 01:51:10 [main] ERROR r.n.s.s.location.LocationServiceImpl - Parent location with id: 100 not found
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Searching location by coordinates: 56.465390, 84.950164 and type: CITY.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 100 and type: CITY.
2025-05-20 01:51:10 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with id:100 and type: CITY - not found.
2025-05-20 01:51:10 [main] ERROR r.n.s.s.location.LocationServiceImpl - Failed to get all locations.
java.lang.RuntimeException: DB error
	at ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations(LocationServiceImpl.java:117)
	at ru.noleg.scootrent.service.location.LocationServiceImplTest.lambda$getAllLocations_shouldThrowServiceException_whenRepositoryFails$5(LocationServiceImplTest.java:339)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.location.LocationServiceImplTest.getAllLocations_shouldThrowServiceException_whenRepositoryFails(LocationServiceImplTest.java:338)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Searching location by coordinates: 56.465390, 84.950164 and type: CITY.
2025-05-20 01:51:10 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with coordinates: 56.465390, 84.950164 and type: CITY not found.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 0 locations.
2025-05-20 01:51:10 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 0.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 3 locations.
2025-05-20 01:51:10 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 1.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 1 and type: CITY.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Adding new location: null.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Location successfully added. Id: 5, Title: null.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 100.
2025-05-20 01:51:10 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with id: 100 not found.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching child locations for parent id: 1.
2025-05-20 01:51:10 [main] INFO  r.n.s.s.location.LocationServiceImpl - Found 1 child locations for parent id: 1.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Deleting location with id: 100.
2025-05-20 01:51:10 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with id: 100 does not exist.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$AgoMGUwU for tariff with type: DEFAULT_TARIFF.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$AgoMGUwU for tariff with type: SUBSCRIPTION.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Calculation of the cost for tariff type: SPECIAL_TARIFF.
2025-05-20 01:51:10 [main] ERROR r.n.s.s.r.billing.BillingServiceImpl - Tariff with type: SPECIAL_TARIFF unsupported.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$AgoMGUwU for tariff with type: DEFAULT_TARIFF.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$AgoMGUwU for tariff with type: SUBSCRIPTION.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$AgoMGUwU for tariff with type: DEFAULT_TARIFF.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$AgoMGUwU for tariff with type: DEFAULT_TARIFF.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$AgoMGUwU for tariff with type: SUBSCRIPTION.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Calculation of the cost for tariff type: DEFAULT_TARIFF.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: null for user with id: 0. 
2025-05-20 01:51:10 [main] ERROR r.n.s.s.r.b.s.DefaultTariffCostStrategy - Error in calculate cost by default tariff: null.
java.lang.NullPointerException: Tariff is null
	at ru.noleg.scootrent.entity.tariff.Tariff.getPricePerUnit(Tariff.java:122)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategy.calculateFinalCost(DefaultTariffCostStrategy.java:43)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategy.calculate(DefaultTariffCostStrategy.java:35)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategyTest.lambda$calculate_shouldWrapExceptionInCostCalculationException_whenInternalErrorOccurs$0(DefaultTariffCostStrategyTest.java:156)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategyTest.calculate_shouldWrapExceptionInCostCalculationException_whenInternalErrorOccurs(DefaultTariffCostStrategyTest.java:155)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 200, duration: PT45M, unlock fee: 25.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Long ride detected (>30 min). Applying discount: x0.8.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 145.000.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 3.0, duration: PT45M, unlock fee: 25.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 160.0.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 3.0, duration: PT5M, unlock fee: 25.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 40.0.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 200, duration: PT5M, unlock fee: 25.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Short ride detected (<10 min). Applying surcharge: x1.2.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 44.200.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Found subscription ErrorTariff. Total free minutes: 50, used: 45
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Minutes left on subscription: 5, minutes requested: 10.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Updated subscription used: +10 minutes.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Limit exceeded by 5
2025-05-20 01:51:10 [main] ERROR r.n.s.s.r.b.s.SubscriptionCostStrategy - Error in calculate cost by subscription ErrorTariff.
java.lang.NullPointerException: Cannot read field "scale" because "multiplicand" is null
	at java.base/java.math.BigDecimal.multiply(BigDecimal.java:1572)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculateFinalCost(SubscriptionCostStrategy.java:88)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate(SubscriptionCostStrategy.java:54)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategyTest.lambda$calculate_shouldThrowCostCalculationException_whenExceptionOccurs$1(SubscriptionCostStrategyTest.java:158)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategyTest.calculate_shouldThrowCostCalculationException_whenExceptionOccurs(SubscriptionCostStrategyTest.java:157)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Found subscription Premium. Total free minutes: 50, used: 45
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Minutes left on subscription: 5, minutes requested: 10.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Updated subscription used: +10 minutes.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Limit exceeded by 5
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Total rental cost for user with id: 1 = 12.5.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 01:51:10 [main] ERROR r.n.s.s.r.b.s.SubscriptionCostStrategy - Subscription for user with id: 1 not found.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Found subscription Gold. Total free minutes: 100, used: 50
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Minutes left on subscription: 50, minutes requested: 30.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Updated subscription used: +30 minutes.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Rental within the subscription.
2025-05-20 01:51:10 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Total rental cost for user with id: 1 = 0.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Found special tariff Silver. Price per minute: 3.0, discount: null.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Duration rental: 20.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Rental cost (without unlock fee): 60.0
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Total rental cost for user with id: 1 = 65.0.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 01:51:11 [main] ERROR r.n.s.s.r.b.s.UserTariffCostStrategy - Special tariff for user with id: 1 not found.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Found special tariff Gold. Price per minute: 2.5, discount: 10.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Price per minute: 2.25.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Duration rental: 30.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Rental cost (without unlock fee): 67.50
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Total rental cost for user with id: 1 = 72.50.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Found special tariff Silver. Price per minute: null, discount: 10.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Price per minute: 2.25.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Duration rental: 20.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Rental cost (without unlock fee): 45.00
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Total rental cost for user with id: 1 = 50.00.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.pause.RentalPauserImpl - Rental status: ACTIVE.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.pause.RentalPauserImpl - Rental with id: 1 successfully pause. Pause time: null.
2025-05-20 01:51:11 [main] WARN  r.n.s.s.r.pause.RentalPauserImpl - Attempt pause already completed rental with id: 1.
2025-05-20 01:51:11 [main] WARN  r.n.s.s.r.pause.RentalPauserImpl - Attempt pause already pause rental with id: 1.
2025-05-20 01:51:11 [main] ERROR r.n.s.s.r.pause.RentalPauserImpl - Rental with id: 1 not found.
2025-05-20 01:51:11 [main] INFO  r.n.s.s.r.RentalServiceDefaultImpl - Get rental history for user with id: 1.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Pauser rental with id: 1.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Stop rental with id: 1, rental point: 5.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Get all rentals.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Start rental. User: 1, Scooter: 2, RentalPoint: 3.
2025-05-20 01:51:11 [main] INFO  r.n.s.s.r.RentalServiceDefaultImpl - Get rental history for scooter with id: 1.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Resume rental with id: 1.
2025-05-20 01:51:11 [main] ERROR r.n.s.s.r.resume.RentalResumerImpl - Rental with id: 1 not found.
2025-05-20 01:51:11 [main] WARN  r.n.s.s.r.resume.RentalResumerImpl - Attempt resume rental with id: 1, in rental status: ACTIVE
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.resume.RentalResumerImpl - Rental with id: 1 successfully resume. Total pause time: PT0S
2025-05-20 01:51:11 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - Scooter with id: 2 is not at the rental point with id: 3.
2025-05-20 01:51:11 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - Scooter with id: 2 is not free. Scooter status: TAKEN.
2025-05-20 01:51:11 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - Location with id: 3 not found.
2025-05-20 01:51:11 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - User with id: 1 already has active rent.
2025-05-20 01:51:11 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - Location with id: 3 is not a rental point. Its type: CITY.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.start.RentalStarterImpl - Rental successfully created with id: 100.
2025-05-20 01:51:11 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - Scooter with id: 2 not found.
2025-05-20 01:51:11 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - Error in select tariff for user with id: 1
ru.noleg.scootrent.exception.ServiceException: Something went wrong
	at ru.noleg.scootrent.service.rental.start.RentalStarterImpl.selectTariff(RentalStarterImpl.java:72)
	at ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental(RentalStarterImpl.java:61)
	at ru.noleg.scootrent.service.rental.start.RentalStarterImplTest.lambda$startRental_shouldThrowServiceException_whenTariffSelectFails$8(RentalStarterImplTest.java:302)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.start.RentalStarterImplTest.startRental_shouldThrowServiceException_whenTariffSelectFails(RentalStarterImplTest.java:301)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:51:11 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - User with id: 1 not found.
2025-05-20 01:51:11 [main] WARN  r.n.s.s.r.stop.RentalStopperImpl - Rental with id: 1 already completed.
2025-05-20 01:51:11 [main] ERROR r.n.s.s.r.stop.RentalStopperImpl - Error in calculate cost for rental with id: 1
java.lang.RuntimeException: Billing failure
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.calculateCost(RentalStopperImpl.java:97)
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental(RentalStopperImpl.java:52)
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImplTest.lambda$stopRental_shouldThrowServiceException_whenBillingServiceFails$4(RentalStopperImplTest.java:192)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImplTest.stopRental_shouldThrowServiceException_whenBillingServiceFails(RentalStopperImplTest.java:191)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:51:11 [main] ERROR r.n.s.s.r.stop.RentalStopperImpl - Rental with id: 1 not found.
2025-05-20 01:51:11 [main] ERROR r.n.s.s.r.stop.RentalStopperImpl - Rental end point with id: 2 not found.
2025-05-20 01:51:11 [main] WARN  r.n.s.s.r.stop.RentalStopperImpl - Location with id: 2 is not a rental point.
2025-05-20 01:51:11 [main] DEBUG r.n.s.s.r.stop.RentalStopperImpl - Rental with id: 1 successfully stopped. Cost: 42.00, Duration: PT50M0.001966804S.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.r.t.s.DefaultTariffStrategy - Selecting default tariff for user with id: 1, by: PER_HOUR.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.r.t.s.DefaultTariffStrategy - Selecting default tariff for user with id: 1, by: PER_HOUR.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.r.t.s.DefaultTariffStrategy - For user with id: 1 not found default tariff.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.r.t.s.SubscriptionTariffStrategy - Selecting subscription for user with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.r.t.s.SubscriptionTariffStrategy - Selecting subscription for user with id: 100.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.r.t.s.UserTariffStrategy - Selecting special tariff for user with id: 100.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.r.t.s.UserTariffStrategy - Selecting special tariff for user with id: 1.
2025-05-20 01:51:12 [main] INFO  r.n.s.s.r.t.TariffSelectionServiceImpl - Search for a suitable tariff for the user with id: 1.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.r.t.TariffSelectionServiceImpl - No tariff found for user with id: 1.
2025-05-20 01:51:12 [main] INFO  r.n.s.s.r.t.TariffSelectionServiceImpl - Search for a suitable tariff for the user with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.r.t.TariffSelectionServiceImpl - Select tariff Default tariff with type: DEFAULT_TARIFF for user with id: 1.
2025-05-20 01:51:12 [main] INFO  r.n.s.s.r.t.TariffSelectionServiceImpl - Search for a suitable tariff for the user with id: 2.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.r.t.TariffSelectionServiceImpl - Error in selection tariff TariffSelectionStrategy$MockitoMock$apWaM3Ip for user with id: 2.
java.lang.RuntimeException: Unexpected failure
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImpl.lambda$selectTariffForUser$0(TariffSelectionServiceImpl.java:36)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602)
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647)
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImpl.selectTariffForUser(TariffSelectionServiceImpl.java:44)
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImplTest.lambda$selectTariffForUser_shouldThrowTariffSelectionException_whenStrategyFails$0(TariffSelectionServiceImplTest.java:65)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImplTest.selectTariffForUser_shouldThrowTariffSelectionException_whenStrategyFails(TariffSelectionServiceImplTest.java:64)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Adding scooter model null.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Model with id: 1 successfully added.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Deleting scooter model with id: 100.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.s.ScooterModelServiceImpl - Scooter model with id: 100 not found.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Fetching all scooter models.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Got 2 scooter models.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Fetching scooter model by id: 2.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Deleting scooter model with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Model with id: 1 successfully deleted.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Fetching scooter model by id: 100.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.s.ScooterModelServiceImpl - Scooter model with id: 100 not found.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: ABC123.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Scooter successfully added with id: 10.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Fetching scooter with id: 100.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.s.ScooterServiceDefaultImpl - Scooter with id: 100 not found.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: null.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.s.ScooterServiceDefaultImpl - Scooter model with id: 100 not found.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: null.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.s.ScooterServiceDefaultImpl - Location with id:2 is not a rental point.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Deleting scooter with id: 100.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.s.ScooterServiceDefaultImpl - Scooter with id: 100 not found.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Fetching scooter with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: null.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.s.ScooterServiceDefaultImpl - Location with id: 100 not found.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Deleting scooter with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Scooter with id: 1 successfully deleted.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Fetching all scooters.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Got 2 scooters.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Subscription 2 successfully assigned to user with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.t.SubscriptionServiceImpl - Tariff with id: 2 is not a subscription and cannot assigned.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.t.SubscriptionServiceImpl - User already been assigned a subscription with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - User with id: 1 not found.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Cansel subscription from user 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Subscription 2 successfully canselt.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - Tariff with id: 2 not found.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Cansel subscription from user 1.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - Subscription not found for user with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.t.SubscriptionServiceImpl - Tariff with id: 2 is not active.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - Subscription not found for user with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.t.TariffAssignmentServiceImpl - Tariff with id: 2 is not active.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - Special tariff not found for user with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - User with id: 1 not found.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Cansel tariff from user 1.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - Special tariff not found for user with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - Tariff with id: 2 not found.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.t.TariffAssignmentServiceImpl - User already been assigned a special tariff with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.t.TariffAssignmentServiceImpl - Tariff with id: 2 is a subscription and cannot assigned.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Tariff 2 successfully assigned to user 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Cansel tariff from user 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Tariff 2 successfully canselt.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Activating tariff with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.tariff.TariffServiceImpl - Tariff already activated.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Creating tariff: null.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Tariff created with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 100.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.tariff.TariffServiceImpl - Tariff with id: 100 not found.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching list active tariffs.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Got 2 active tariffs.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching list tariffs.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Deactivating tariff with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 01:51:12 [main] WARN  r.n.s.s.tariff.TariffServiceImpl - Tariff already deactivated.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Deactivating tariff with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Tariff with id 1 successfully deactivated.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Activating tariff with id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 01:51:12 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Tariff with id 1 successfully activated.
2025-05-20 01:51:12 [main] ERROR r.n.s.s.user.UserDetailsServiceImpl - User with username: notfound not found.
2025-05-20 01:52:53 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 21.0.4 with PID 28908 (started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 01:52:53 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 01:52:53 [main] INFO  r.n.s.ScootRentApplicationTests - The following 1 profile is active: "test"
2025-05-20 01:52:56 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 01:52:56 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 01:52:56 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 01:52:57 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 01:52:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 01:52:58 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-05-20 01:52:58 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 01:52:58 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 01:53:00 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 01:53:01 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
2025-05-20 01:53:01 [main] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
2025-05-20 01:53:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 01:53:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 01:53:01 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 01:53:01 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 94 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:136)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:99)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:77)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:289)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 98 common frames omitted
2025-05-20 01:53:01 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.noleg.scootrent.ScootRentApplicationTests@1fb379e4]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3e8eea59 testClass = ru.noleg.scootrent.ScootRentApplicationTests, locations = [], classes = [ru.noleg.scootrent.ScootRentApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2254127a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@14bdbc74, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1224144a, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@448c8166, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@7098b907, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@68746f22, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@a9fd11b7], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 94 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:136)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:99)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:77)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:289)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 98 common frames omitted
2025-05-20 01:55:39 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 21.0.4 with PID 19060 (started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 01:55:39 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 01:55:39 [main] INFO  r.n.s.ScootRentApplicationTests - The following 1 profile is active: "test"
2025-05-20 01:55:42 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 01:55:42 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 01:55:42 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 01:55:43 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 01:55:43 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 01:55:44 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-05-20 01:55:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 01:55:44 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 01:55:46 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 01:55:46 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
2025-05-20 01:55:46 [main] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
2025-05-20 01:55:46 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 01:55:46 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 01:55:46 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 01:55:46 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 94 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:136)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:99)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:77)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:289)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 98 common frames omitted
2025-05-20 01:55:46 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.noleg.scootrent.ScootRentApplicationTests@17d25e1d]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6f51d1cc testClass = ru.noleg.scootrent.ScootRentApplicationTests, locations = [], classes = [ru.noleg.scootrent.ScootRentApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7fc4780b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6b6776cb, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1acaf3d, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@518caac3, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6c372fe6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@3eb81efb, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@aed21b1a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 94 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_location_node]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:136)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:99)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:77)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:289)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 98 common frames omitted
2025-05-20 01:56:20 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 21.0.4 with PID 33524 (started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 01:56:20 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 01:56:20 [main] INFO  r.n.s.ScootRentApplicationTests - The following 1 profile is active: "test"
2025-05-20 01:56:22 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 01:56:23 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 01:56:23 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 01:56:23 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 01:56:24 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 01:56:24 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-05-20 01:56:24 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 01:56:24 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 01:56:26 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 01:56:26 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 01:56:27 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-20 01:56:27 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByCoordinatesAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getChildrenLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByIdAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.validateAndGetScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.pause.RentalPauserImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.validateRentalStatusForResume' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.UserTariffCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added DefaultTariffCostStrategy for tariff with type: DEFAULT_TARIFF.
2025-05-20 01:56:27 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added SubscriptionCostStrategy$$SpringCGLIB$$0 for tariff with type: SUBSCRIPTION.
2025-05-20 01:56:27 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added UserTariffCostStrategy$$SpringCGLIB$$0 for tariff with type: SPECIAL_TARIFF.
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentals' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getAllScooters' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getScooterModel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.activateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getActiveTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.deactivateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.createTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getAllTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.validateAndGetTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.subscribeUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getActiveSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.canselSubscriptionFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.validateAndGetTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.assignTariffToUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getActiveUserTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.canselTariffFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 01:56:28 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-20 01:56:29 [main] INFO  r.n.s.ScootRentApplicationTests - Started ScootRentApplicationTests in 10.337 seconds (process running for 12.647)
2025-05-20 01:56:29 [main] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 01:56:30 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42104, SQLState: 42S04
2025-05-20 01:56:30 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "T_USER" not found (this database is empty); SQL statement:
select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=? [42104-232]
2025-05-20 01:56:30 [main] ERROR r.n.s.r.impl.UserRepositoryJpaImpl - Failed to find user by username: admin.
org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "T_USER" not found (this database is empty); SQL statement:
select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=? [42104-232]] [select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=?]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:191)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:153)
	at org.hibernate.sql.exec.internal.StandardStatementCreator.createStatement(StandardStatementCreator.java:49)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:235)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:171)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.<init>(JdbcValuesResultSetImpl.java:74)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:355)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:137)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:42)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.findByUsername(<generated>)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.initUser(PrivilegedUsersSetup.java:50)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run(PrivilegedUsersSetup.java:44)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup$$SpringCGLIB$$0.run(<generated>)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "T_USER" not found (this database is empty); SQL statement:
select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=? [42104-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7932)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7916)
	at org.h2.command.Parser.readTableOrView(Parser.java:7895)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1769)
	at org.h2.command.Parser.readTableReference(Parser.java:2249)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2702)
	at org.h2.command.Parser.parseSelect(Parser.java:2810)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2692)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2547)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2526)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2519)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2512)
	at org.h2.command.Parser.parseQuery(Parser.java:2479)
	at org.h2.command.Parser.parsePrepared(Parser.java:610)
	at org.h2.command.Parser.parse(Parser.java:581)
	at org.h2.command.Parser.parse(Parser.java:556)
	at org.h2.command.Parser.prepareCommand(Parser.java:484)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:645)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:561)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1164)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:687)
	at com.zaxxer.hikari.pool.ProxyConnection.prepareStatement(ProxyConnection.java:342)
	at com.zaxxer.hikari.pool.HikariProxyConnection.prepareStatement(HikariProxyConnection.java)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$4.doPrepare(StatementPreparerImpl.java:151)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:180)
	... 138 common frames omitted
2025-05-20 01:56:30 [main] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run] after exception: ru.noleg.scootrent.exception.RepositoryException: Repository error on fetch user by username
2025-05-20 01:56:30 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 01:56:30 [main] ERROR o.s.boot.SpringApplication - Application run failed
ru.noleg.scootrent.exception.RepositoryException: Repository error on fetch user by username
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.findByUsername(<generated>)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.initUser(PrivilegedUsersSetup.java:50)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run(PrivilegedUsersSetup.java:44)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup$$SpringCGLIB$$0.run(<generated>)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "T_USER" not found (this database is empty); SQL statement:
select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=? [42104-232]] [select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=?]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:191)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:153)
	at org.hibernate.sql.exec.internal.StandardStatementCreator.createStatement(StandardStatementCreator.java:49)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:235)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:171)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.<init>(JdbcValuesResultSetImpl.java:74)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:355)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:137)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:42)
	... 121 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "T_USER" not found (this database is empty); SQL statement:
select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=? [42104-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7932)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7916)
	at org.h2.command.Parser.readTableOrView(Parser.java:7895)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1769)
	at org.h2.command.Parser.readTableReference(Parser.java:2249)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2702)
	at org.h2.command.Parser.parseSelect(Parser.java:2810)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2692)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2547)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2526)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2519)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2512)
	at org.h2.command.Parser.parseQuery(Parser.java:2479)
	at org.h2.command.Parser.parsePrepared(Parser.java:610)
	at org.h2.command.Parser.parse(Parser.java:581)
	at org.h2.command.Parser.parse(Parser.java:556)
	at org.h2.command.Parser.prepareCommand(Parser.java:484)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:645)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:561)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1164)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:687)
	at com.zaxxer.hikari.pool.ProxyConnection.prepareStatement(ProxyConnection.java:342)
	at com.zaxxer.hikari.pool.HikariProxyConnection.prepareStatement(HikariProxyConnection.java)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$4.doPrepare(StatementPreparerImpl.java:151)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:180)
	... 138 common frames omitted
2025-05-20 01:56:30 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 01:56:30 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 01:56:30 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 01:56:30 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.noleg.scootrent.ScootRentApplicationTests@247246ea]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@7b159d1b testClass = ru.noleg.scootrent.ScootRentApplicationTests, locations = [], classes = [ru.noleg.scootrent.ScootRentApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7fc4780b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6b6776cb, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1acaf3d, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@518caac3, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6c372fe6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@3eb81efb, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@aed21b1a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: ru.noleg.scootrent.exception.RepositoryException: Repository error on fetch user by username
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.findByUsername(<generated>)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.initUser(PrivilegedUsersSetup.java:50)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run(PrivilegedUsersSetup.java:44)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup$$SpringCGLIB$$0.run(<generated>)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "T_USER" not found (this database is empty); SQL statement:
select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=? [42104-232]] [select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=?]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:191)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:153)
	at org.hibernate.sql.exec.internal.StandardStatementCreator.createStatement(StandardStatementCreator.java:49)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:235)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:171)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.<init>(JdbcValuesResultSetImpl.java:74)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:355)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:137)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:42)
	... 121 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "T_USER" not found (this database is empty); SQL statement:
select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=? [42104-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7932)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:7916)
	at org.h2.command.Parser.readTableOrView(Parser.java:7895)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1769)
	at org.h2.command.Parser.readTableReference(Parser.java:2249)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2702)
	at org.h2.command.Parser.parseSelect(Parser.java:2810)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2692)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2547)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2526)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2519)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2512)
	at org.h2.command.Parser.parseQuery(Parser.java:2479)
	at org.h2.command.Parser.parsePrepared(Parser.java:610)
	at org.h2.command.Parser.parse(Parser.java:581)
	at org.h2.command.Parser.parse(Parser.java:556)
	at org.h2.command.Parser.prepareCommand(Parser.java:484)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:645)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:561)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1164)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:687)
	at com.zaxxer.hikari.pool.ProxyConnection.prepareStatement(ProxyConnection.java:342)
	at com.zaxxer.hikari.pool.HikariProxyConnection.prepareStatement(HikariProxyConnection.java)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$4.doPrepare(StatementPreparerImpl.java:151)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:180)
	... 138 common frames omitted
2025-05-20 01:59:14 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 21.0.4 with PID 28472 (started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 01:59:14 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 01:59:14 [main] INFO  r.n.s.ScootRentApplicationTests - The following 1 profile is active: "test"
2025-05-20 01:59:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 01:59:17 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-05-20 01:59:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 01:59:17 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:testdb (H2 2.3)
2025-05-20 01:59:17 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.3.232 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.224.
2025-05-20 01:59:18 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-05-20 01:59:18 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.075s)
2025-05-20 01:59:18 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-05-20 01:59:18 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-05-20 01:59:18 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1.1 - create scooter model"
2025-05-20 01:59:18 [main] ERROR o.f.core.internal.command.DbMigrate - Migration of schema "PUBLIC" to version "1.1 - create scooter model" failed! Please restore backups and roll back database and code!
2025-05-20 01:59:18 [main] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: Failed to initialize dependency 'flywayInitializer' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY
-- always - генерит автоматически но запрещает вставку
-- by default - генерит автоматически но разрешает вставку
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 4
Statement  : Run Flyway with -X option to see the actual statement causing the problem

2025-05-20 01:59:18 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 01:59:18 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 01:59:18 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 01:59:18 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: Failed to initialize dependency 'flywayInitializer' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY
-- always - генерит автоматически но запрещает вставку
-- by default - генерит автоматически но разрешает вставку
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 4
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:328)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY
-- always - генерит автоматически но запрещает вставку
-- by default - генерит автоматически но разрешает вставку
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 4
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	... 89 common frames omitted
Caused by: org.flywaydb.core.internal.exception.FlywayMigrateException: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY
-- always - генерит автоматически но запрещает вставку
-- by default - генерит автоматически но разрешает вставку
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 4
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:399)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:283)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:282)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:255)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:153)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:40)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:35)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:106)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:149)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:153)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:104)
	at org.flywaydb.core.Flyway.lambda$migrate$1(Flyway.java:230)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:176)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 96 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY
-- always - генерит автоматически но запрещает вставку
-- by default - генерит автоматически но разрешает вставку
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 4
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:256)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:217)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:137)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:75)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:66)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:31)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:65)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:391)
	... 114 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Синтаксическая ошибка в выражении SQL "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY
-- always - генерит автоматически но запрещает вставку
-- by default - генерит автоматически но разрешает вставку
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:762)
	at org.h2.command.ParserBase.read(ParserBase.java:369)
	at org.h2.command.ParserBase.readIfMore(ParserBase.java:637)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8820)
	at org.h2.command.Parser.parseCreate(Parser.java:6398)
	at org.h2.command.Parser.parsePrepared(Parser.java:645)
	at org.h2.command.Parser.parse(Parser.java:581)
	at org.h2.command.Parser.parse(Parser.java:561)
	at org.h2.command.Parser.prepareCommand(Parser.java:484)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:645)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:561)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1164)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:210)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:88)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:212)
	... 120 common frames omitted
2025-05-20 01:59:18 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.noleg.scootrent.ScootRentApplicationTests@1f408ab6]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@491893f8 testClass = ru.noleg.scootrent.ScootRentApplicationTests, locations = [], classes = [ru.noleg.scootrent.ScootRentApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7fc4780b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6b6776cb, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1acaf3d, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@518caac3, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6c372fe6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@3eb81efb, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@aed21b1a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: Failed to initialize dependency 'flywayInitializer' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY
-- always - генерит автоматически но запрещает вставку
-- by default - генерит автоматически но разрешает вставку
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 4
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:328)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY
-- always - генерит автоматически но запрещает вставку
-- by default - генерит автоматически но разрешает вставку
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 4
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	... 89 common frames omitted
Caused by: org.flywaydb.core.internal.exception.FlywayMigrateException: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY
-- always - генерит автоматически но запрещает вставку
-- by default - генерит автоматически но разрешает вставку
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 4
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:399)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:283)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:282)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:255)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:153)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:40)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:35)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:106)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:149)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:153)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:104)
	at org.flywaydb.core.Flyway.lambda$migrate$1(Flyway.java:230)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:176)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 96 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY
-- always - генерит автоматически но запрещает вставку
-- by default - генерит автоматически но разрешает вставку
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 4
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:256)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:217)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:137)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:75)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:66)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:31)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:65)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:391)
	... 114 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Синтаксическая ошибка в выражении SQL "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY\000d\000a-- always - генерит автоматически но запрещает вставку\000d\000a-- by default - генерит автоматически но разрешает вставку\000d\000aCREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
-- TODO может c_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY
-- always - генерит автоматически но запрещает вставку
-- by default - генерит автоматически но разрешает вставку
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:762)
	at org.h2.command.ParserBase.read(ParserBase.java:369)
	at org.h2.command.ParserBase.readIfMore(ParserBase.java:637)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8820)
	at org.h2.command.Parser.parseCreate(Parser.java:6398)
	at org.h2.command.Parser.parsePrepared(Parser.java:645)
	at org.h2.command.Parser.parse(Parser.java:581)
	at org.h2.command.Parser.parse(Parser.java:561)
	at org.h2.command.Parser.prepareCommand(Parser.java:484)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:645)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:561)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1164)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:210)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:88)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:212)
	... 120 common frames omitted
2025-05-20 02:00:40 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 21.0.4 with PID 13376 (started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 02:00:40 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 02:00:40 [main] INFO  r.n.s.ScootRentApplicationTests - The following 1 profile is active: "test"
2025-05-20 02:00:43 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 02:00:44 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-05-20 02:00:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 02:00:44 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:testdb (H2 2.3)
2025-05-20 02:00:44 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.3.232 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.224.
2025-05-20 02:00:44 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-05-20 02:00:44 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.088s)
2025-05-20 02:00:44 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-05-20 02:00:44 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-05-20 02:00:44 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1.1 - create scooter model"
2025-05-20 02:00:44 [main] ERROR o.f.core.internal.command.DbMigrate - Migration of schema "PUBLIC" to version "1.1 - create scooter model" failed! Please restore backups and roll back database and code!
2025-05-20 02:00:44 [main] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: Failed to initialize dependency 'flywayInitializer' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

2025-05-20 02:00:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 02:00:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 02:00:44 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 02:00:45 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: Failed to initialize dependency 'flywayInitializer' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:328)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	... 89 common frames omitted
Caused by: org.flywaydb.core.internal.exception.FlywayMigrateException: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:399)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:283)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:282)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:255)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:153)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:40)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:35)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:106)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:149)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:153)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:104)
	at org.flywaydb.core.Flyway.lambda$migrate$1(Flyway.java:230)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:176)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 96 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:256)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:217)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:137)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:75)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:66)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:31)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:65)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:391)
	... 114 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Синтаксическая ошибка в выражении SQL "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:762)
	at org.h2.command.ParserBase.read(ParserBase.java:369)
	at org.h2.command.ParserBase.readIfMore(ParserBase.java:637)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8820)
	at org.h2.command.Parser.parseCreate(Parser.java:6398)
	at org.h2.command.Parser.parsePrepared(Parser.java:645)
	at org.h2.command.Parser.parse(Parser.java:581)
	at org.h2.command.Parser.parse(Parser.java:561)
	at org.h2.command.Parser.prepareCommand(Parser.java:484)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:645)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:561)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1164)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:210)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:88)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:212)
	... 120 common frames omitted
2025-05-20 02:00:45 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.noleg.scootrent.ScootRentApplicationTests@1f408ab6]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@491893f8 testClass = ru.noleg.scootrent.ScootRentApplicationTests, locations = [], classes = [ru.noleg.scootrent.ScootRentApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7fc4780b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6b6776cb, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1acaf3d, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@518caac3, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@6c372fe6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@3eb81efb, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@aed21b1a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: Failed to initialize dependency 'flywayInitializer' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:328)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	... 89 common frames omitted
Caused by: org.flywaydb.core.internal.exception.FlywayMigrateException: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:399)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:283)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:282)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:255)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:153)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:40)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:35)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:106)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:149)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:153)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:104)
	at org.flywaydb.core.Flyway.lambda$migrate$1(Flyway.java:230)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:176)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 96 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Script V1_1__create_scooter_model.sql failed
--------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Синтаксическая ошибка в выражении SQL "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
Location   : db/migration/V1_1__create_scooter_model.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V1_1__create_scooter_model.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:256)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:217)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:137)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:75)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:66)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:31)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:65)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:391)
	... 114 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Синтаксическая ошибка в выражении SQL "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; ожидалось "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"
Syntax error in SQL statement "CREATE TABLE t_scooter_model\000d\000a(\000d\000a    c_id        BIGINT PRIMARY KEY [*]GENERATED ALWAYS AS IDENTITY,\000d\000a    c_title     VARCHAR(50) NOT NULL,\000d\000a    c_max_speed INTEGER     NOT NULL,\000d\000a    c_range_km  INTEGER     NOT NULL\000d\000a)"; expected "HASH, CONSTRAINT, COMMENT, UNIQUE, NOT NULL, CHECK, REFERENCES, ,, )"; SQL statement:
CREATE TABLE t_scooter_model
(
    c_id        BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    c_title     VARCHAR(50) NOT NULL,
    c_max_speed INTEGER     NOT NULL,
    c_range_km  INTEGER     NOT NULL
) [42001-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:762)
	at org.h2.command.ParserBase.read(ParserBase.java:369)
	at org.h2.command.ParserBase.readIfMore(ParserBase.java:637)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8820)
	at org.h2.command.Parser.parseCreate(Parser.java:6398)
	at org.h2.command.Parser.parsePrepared(Parser.java:645)
	at org.h2.command.Parser.parse(Parser.java:581)
	at org.h2.command.Parser.parse(Parser.java:561)
	at org.h2.command.Parser.prepareCommand(Parser.java:484)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:645)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:561)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1164)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:210)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:88)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:212)
	... 120 common frames omitted
2025-05-20 02:19:11 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 21.0.4 with PID 29528 (started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 02:19:11 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 02:19:11 [main] INFO  r.n.s.ScootRentApplicationTests - The following 1 profile is active: "test"
2025-05-20 02:19:14 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 02:19:15 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@26d24d7a
2025-05-20 02:19:15 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 02:19:15 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:47974/testdb?loggerLevel=OFF (PostgreSQL 16.8)
2025-05-20 02:19:15 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.080s)
2025-05-20 02:19:15 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 02:19:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 02:19:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 02:19:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 02:19:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 02:19:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 02:19:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 02:19:16 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 15 migrations to schema "public", now at version v2.7 (execution time 00:00.333s)
2025-05-20 02:19:16 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 02:19:16 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 02:19:16 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 02:19:17 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 02:19:17 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.8
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 02:19:19 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 02:19:19 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 02:19:20 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-20 02:19:20 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByIdAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getChildrenLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByCoordinatesAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.validateAndGetScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.pause.RentalPauserImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.updateRentalStatus' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.UserTariffCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added DefaultTariffCostStrategy for tariff with type: DEFAULT_TARIFF.
2025-05-20 02:19:20 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added SubscriptionCostStrategy$$SpringCGLIB$$0 for tariff with type: SUBSCRIPTION.
2025-05-20 02:19:20 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added UserTariffCostStrategy$$SpringCGLIB$$0 for tariff with type: SPECIAL_TARIFF.
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentals' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getAllScooters' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getScooterModel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.deactivateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.activateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getActiveTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getAllTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.createTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getActiveSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.canselSubscriptionFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.subscribeUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.canselTariffFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getActiveUserTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.assignTariffToUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:19:21 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-20 02:19:22 [main] INFO  r.n.s.ScootRentApplicationTests - Started ScootRentApplicationTests in 12.148 seconds (process running for 24.444)
2025-05-20 02:19:22 [main] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 02:19:23 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 02:19:23 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'admin'.
2025-05-20 02:19:23 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 02:19:23 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'moderator'.
2025-05-20 02:19:23 [main] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 02:19:25 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 02:19:25 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 02:19:25 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 02:22:04 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 17.0.14 with PID 44121 (started by oleg_sandr in /mnt/c/Users/nazar/java-project/scoot-rent)
2025-05-20 02:22:04 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 02:22:04 [main] INFO  r.n.s.ScootRentApplicationTests - The following 1 profile is active: "test"
2025-05-20 02:22:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 02:22:23 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1252d480
2025-05-20 02:22:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 02:22:23 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:48259/testdb?loggerLevel=OFF (PostgreSQL 16.8)
2025-05-20 02:22:24 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 02:22:24 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.551s)
2025-05-20 02:22:24 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 02:22:24 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 02:22:24 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 02:22:24 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 02:22:24 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 02:22:24 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 02:22:24 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 02:22:25 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 02:22:25 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 02:22:25 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 02:22:25 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 02:22:25 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 02:22:25 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 02:22:25 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 02:22:26 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 02:22:26 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 02:22:26 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 02:22:26 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 15 migrations to schema "public", now at version v2.7 (execution time 00:00.235s)
2025-05-20 02:22:27 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 02:22:27 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 02:22:28 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 02:22:32 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 02:22:33 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.8
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 02:22:42 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 02:22:43 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 02:22:43 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-20 02:22:43 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-20 02:22:43 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:43 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getChildrenLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByIdAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByCoordinatesAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.pause.RentalPauserImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.UserTariffCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added DefaultTariffCostStrategy for tariff with type: DEFAULT_TARIFF.
2025-05-20 02:22:44 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added SubscriptionCostStrategy$$SpringCGLIB$$0 for tariff with type: SUBSCRIPTION.
2025-05-20 02:22:44 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added UserTariffCostStrategy$$SpringCGLIB$$0 for tariff with type: SPECIAL_TARIFF.
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentals' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getAllScooters' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getScooterModel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.createTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.deactivateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.activateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getActiveTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getAllTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.subscribeUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.canselSubscriptionFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getActiveSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.assignTariffToUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.canselTariffFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:45 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getActiveUserTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 02:22:46 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 02:22:47 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-20 02:22:51 [main] INFO  r.n.s.ScootRentApplicationTests - Started ScootRentApplicationTests in 50.076 seconds (process running for 87.576)
2025-05-20 02:22:52 [main] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 02:22:55 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 02:22:55 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'admin'.
2025-05-20 02:22:55 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 02:22:55 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'moderator'.
2025-05-20 02:22:55 [main] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User successfully signUp with id: 1.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 02:22:57 [main] ERROR r.n.s.s.a.AuthenticationServiceJwtImpl - User with email email@gmail.com already exists.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User: user, successfully signIn.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 02:22:57 [main] ERROR r.n.s.s.a.AuthenticationServiceJwtImpl - User with username user already exists.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 02:22:57 [main] ERROR r.n.s.s.a.AuthenticationServiceJwtImpl - User with phone 123456789 already exists.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: user.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 1 locations.
2025-05-20 02:22:57 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 1.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 1 locations.
2025-05-20 02:22:57 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 1.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Deleting location with id: 1.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Location with id: 1 successfully deleted.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 1.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Adding new location: null.
2025-05-20 02:22:57 [main] ERROR r.n.s.s.location.LocationServiceImpl - Parent location with id: 100 not found
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Searching location by coordinates: 56.465390, 84.950164 and type: CITY.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 100 and type: CITY.
2025-05-20 02:22:57 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with id:100 and type: CITY - not found.
2025-05-20 02:22:57 [main] ERROR r.n.s.s.location.LocationServiceImpl - Failed to get all locations.
java.lang.RuntimeException: DB error
	at ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations(LocationServiceImpl.java:117)
	at ru.noleg.scootrent.service.location.LocationServiceImplTest.lambda$getAllLocations_shouldThrowServiceException_whenRepositoryFails$5(LocationServiceImplTest.java:339)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.location.LocationServiceImplTest.getAllLocations_shouldThrowServiceException_whenRepositoryFails(LocationServiceImplTest.java:338)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Searching location by coordinates: 56.465390, 84.950164 and type: CITY.
2025-05-20 02:22:57 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with coordinates: 56.465390, 84.950164 and type: CITY not found.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 0 locations.
2025-05-20 02:22:57 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 0.
2025-05-20 02:22:57 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Found 3 locations.
2025-05-20 02:22:58 [main] INFO  r.n.s.s.location.LocationServiceImpl - Successfully built location hierarchy. Root count: 1.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 1 and type: CITY.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Adding new location: null.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Location successfully added. Id: 5, Title: null.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching location by id: 100.
2025-05-20 02:22:58 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with id: 100 not found.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Fetching child locations for parent id: 1.
2025-05-20 02:22:58 [main] INFO  r.n.s.s.location.LocationServiceImpl - Found 1 child locations for parent id: 1.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.location.LocationServiceImpl - Deleting location with id: 100.
2025-05-20 02:22:58 [main] ERROR r.n.s.s.location.LocationServiceImpl - Location with id: 100 does not exist.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$JUcbIW5d for tariff with type: DEFAULT_TARIFF.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$JUcbIW5d for tariff with type: SUBSCRIPTION.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Calculation of the cost for tariff type: SPECIAL_TARIFF.
2025-05-20 02:22:58 [main] ERROR r.n.s.s.r.billing.BillingServiceImpl - Tariff with type: SPECIAL_TARIFF unsupported.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$JUcbIW5d for tariff with type: DEFAULT_TARIFF.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$JUcbIW5d for tariff with type: SUBSCRIPTION.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$JUcbIW5d for tariff with type: DEFAULT_TARIFF.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$JUcbIW5d for tariff with type: DEFAULT_TARIFF.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added RentalCostStrategy$MockitoMock$JUcbIW5d for tariff with type: SUBSCRIPTION.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Calculation of the cost for tariff type: DEFAULT_TARIFF.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: null for user with id: 0. 
2025-05-20 02:22:58 [main] ERROR r.n.s.s.r.b.s.DefaultTariffCostStrategy - Error in calculate cost by default tariff: null.
java.lang.NullPointerException: Tariff is null
	at ru.noleg.scootrent.entity.tariff.Tariff.getPricePerUnit(Tariff.java:122)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategy.calculateFinalCost(DefaultTariffCostStrategy.java:43)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategy.calculate(DefaultTariffCostStrategy.java:35)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategyTest.lambda$calculate_shouldWrapExceptionInCostCalculationException_whenInternalErrorOccurs$0(DefaultTariffCostStrategyTest.java:156)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.billing.strategy.DefaultTariffCostStrategyTest.calculate_shouldWrapExceptionInCostCalculationException_whenInternalErrorOccurs(DefaultTariffCostStrategyTest.java:155)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 200, duration: PT45M, unlock fee: 25.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Long ride detected (>30 min). Applying discount: x0.8.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 145.000.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 3.0, duration: PT45M, unlock fee: 25.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 160.0.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 3.0, duration: PT5M, unlock fee: 25.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 40.0.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Calculate rental cost by default tariff: Standard Tariff for user with id: 0. 
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Price per unit: 200, duration: PT5M, unlock fee: 25.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Short ride detected (<10 min). Applying surcharge: x1.2.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.DefaultTariffCostStrategy - Total rental cost for user with id: 0 = 44.200.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Found subscription ErrorTariff. Total free minutes: 50, used: 45
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Minutes left on subscription: 5, minutes requested: 10.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Updated subscription used: +10 minutes.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Limit exceeded by 5
2025-05-20 02:22:58 [main] ERROR r.n.s.s.r.b.s.SubscriptionCostStrategy - Error in calculate cost by subscription ErrorTariff.
java.lang.NullPointerException: Cannot read field "scale" because "multiplicand" is null
	at java.base/java.math.BigDecimal.multiply(BigDecimal.java:1572)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculateFinalCost(SubscriptionCostStrategy.java:88)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate(SubscriptionCostStrategy.java:54)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategyTest.lambda$calculate_shouldThrowCostCalculationException_whenExceptionOccurs$1(SubscriptionCostStrategyTest.java:158)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategyTest.calculate_shouldThrowCostCalculationException_whenExceptionOccurs(SubscriptionCostStrategyTest.java:157)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Found subscription Premium. Total free minutes: 50, used: 45
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Minutes left on subscription: 5, minutes requested: 10.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Updated subscription used: +10 minutes.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Limit exceeded by 5
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Total rental cost for user with id: 1 = 12.5.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 02:22:58 [main] ERROR r.n.s.s.r.b.s.SubscriptionCostStrategy - Subscription for user with id: 1 not found.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Calculate rental cost by subscription for user with id: 1.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Found subscription Gold. Total free minutes: 100, used: 50
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Minutes left on subscription: 50, minutes requested: 30.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Updated subscription used: +30 minutes.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Rental within the subscription.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.SubscriptionCostStrategy - Total rental cost for user with id: 1 = 0.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Found special tariff Silver. Price per minute: 3.0, discount: null.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Duration rental: 20.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Rental cost (without unlock fee): 60.0
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Total rental cost for user with id: 1 = 65.0.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 02:22:58 [main] ERROR r.n.s.s.r.b.s.UserTariffCostStrategy - Special tariff for user with id: 1 not found.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Found special tariff Gold. Price per minute: 2.5, discount: 10.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Price per minute: 2.25.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Duration rental: 30.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Rental cost (without unlock fee): 67.50
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Total rental cost for user with id: 1 = 72.50.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Calculate cost for rental by special tariff for user with id: 1.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Found special tariff Silver. Price per minute: null, discount: 10.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Price per minute: 2.25.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Duration rental: 20.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Rental cost (without unlock fee): 45.00
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.b.s.UserTariffCostStrategy - Total rental cost for user with id: 1 = 50.00.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.pause.RentalPauserImpl - Rental status: ACTIVE.
2025-05-20 02:22:58 [main] DEBUG r.n.s.s.r.pause.RentalPauserImpl - Rental with id: 1 successfully pause. Pause time: null.
2025-05-20 02:22:58 [main] WARN  r.n.s.s.r.pause.RentalPauserImpl - Attempt pause already completed rental with id: 1.
2025-05-20 02:22:58 [main] WARN  r.n.s.s.r.pause.RentalPauserImpl - Attempt pause already pause rental with id: 1.
2025-05-20 02:22:58 [main] ERROR r.n.s.s.r.pause.RentalPauserImpl - Rental with id: 1 not found.
2025-05-20 02:22:59 [main] INFO  r.n.s.s.r.RentalServiceDefaultImpl - Get rental history for user with id: 1.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Pauser rental with id: 1.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Stop rental with id: 1, rental point: 5.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Get all rentals.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Start rental. User: 1, Scooter: 2, RentalPoint: 3.
2025-05-20 02:22:59 [main] INFO  r.n.s.s.r.RentalServiceDefaultImpl - Get rental history for scooter with id: 1.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.RentalServiceDefaultImpl - Resume rental with id: 1.
2025-05-20 02:22:59 [main] ERROR r.n.s.s.r.resume.RentalResumerImpl - Rental with id: 1 not found.
2025-05-20 02:22:59 [main] WARN  r.n.s.s.r.resume.RentalResumerImpl - Attempt resume rental with id: 1, in rental status: ACTIVE
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.resume.RentalResumerImpl - Rental with id: 1 successfully resume. Total pause time: PT0S
2025-05-20 02:22:59 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - Scooter with id: 2 is not at the rental point with id: 3.
2025-05-20 02:22:59 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - Scooter with id: 2 is not free. Scooter status: TAKEN.
2025-05-20 02:22:59 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - Location with id: 3 not found.
2025-05-20 02:22:59 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - User with id: 1 already has active rent.
2025-05-20 02:22:59 [main] WARN  r.n.s.s.r.start.RentalStarterImpl - Location with id: 3 is not a rental point. Its type: CITY.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.start.RentalStarterImpl - Rental successfully created with id: 100.
2025-05-20 02:22:59 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - Scooter with id: 2 not found.
2025-05-20 02:22:59 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - Error in select tariff for user with id: 1
ru.noleg.scootrent.exception.ServiceException: Something went wrong
	at ru.noleg.scootrent.service.rental.start.RentalStarterImpl.selectTariff(RentalStarterImpl.java:72)
	at ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental(RentalStarterImpl.java:61)
	at ru.noleg.scootrent.service.rental.start.RentalStarterImplTest.lambda$startRental_shouldThrowServiceException_whenTariffSelectFails$8(RentalStarterImplTest.java:302)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.start.RentalStarterImplTest.startRental_shouldThrowServiceException_whenTariffSelectFails(RentalStarterImplTest.java:301)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 02:22:59 [main] ERROR r.n.s.s.r.start.RentalStarterImpl - User with id: 1 not found.
2025-05-20 02:22:59 [main] WARN  r.n.s.s.r.stop.RentalStopperImpl - Rental with id: 1 already completed.
2025-05-20 02:22:59 [main] ERROR r.n.s.s.r.stop.RentalStopperImpl - Error in calculate cost for rental with id: 1
java.lang.RuntimeException: Billing failure
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.calculateCost(RentalStopperImpl.java:97)
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental(RentalStopperImpl.java:52)
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImplTest.lambda$stopRental_shouldThrowServiceException_whenBillingServiceFails$4(RentalStopperImplTest.java:192)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.stop.RentalStopperImplTest.stopRental_shouldThrowServiceException_whenBillingServiceFails(RentalStopperImplTest.java:191)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 02:22:59 [main] ERROR r.n.s.s.r.stop.RentalStopperImpl - Rental with id: 1 not found.
2025-05-20 02:22:59 [main] ERROR r.n.s.s.r.stop.RentalStopperImpl - Rental end point with id: 2 not found.
2025-05-20 02:22:59 [main] WARN  r.n.s.s.r.stop.RentalStopperImpl - Location with id: 2 is not a rental point.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.stop.RentalStopperImpl - Rental with id: 1 successfully stopped. Cost: 42.00, Duration: PT50M0.001504683S.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.t.s.DefaultTariffStrategy - Selecting default tariff for user with id: 1, by: PER_HOUR.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.t.s.DefaultTariffStrategy - Selecting default tariff for user with id: 1, by: PER_HOUR.
2025-05-20 02:22:59 [main] ERROR r.n.s.s.r.t.s.DefaultTariffStrategy - For user with id: 1 not found default tariff.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.t.s.SubscriptionTariffStrategy - Selecting subscription for user with id: 1.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.t.s.SubscriptionTariffStrategy - Selecting subscription for user with id: 100.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.t.s.UserTariffStrategy - Selecting special tariff for user with id: 100.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.t.s.UserTariffStrategy - Selecting special tariff for user with id: 1.
2025-05-20 02:22:59 [main] INFO  r.n.s.s.r.t.TariffSelectionServiceImpl - Search for a suitable tariff for the user with id: 1.
2025-05-20 02:22:59 [main] ERROR r.n.s.s.r.t.TariffSelectionServiceImpl - No tariff found for user with id: 1.
2025-05-20 02:22:59 [main] INFO  r.n.s.s.r.t.TariffSelectionServiceImpl - Search for a suitable tariff for the user with id: 1.
2025-05-20 02:22:59 [main] DEBUG r.n.s.s.r.t.TariffSelectionServiceImpl - Select tariff Default tariff with type: DEFAULT_TARIFF for user with id: 1.
2025-05-20 02:22:59 [main] INFO  r.n.s.s.r.t.TariffSelectionServiceImpl - Search for a suitable tariff for the user with id: 2.
2025-05-20 02:22:59 [main] WARN  r.n.s.s.r.t.TariffSelectionServiceImpl - Error in selection tariff TariffSelectionStrategy$MockitoMock$qviABkPp for user with id: 2.
java.lang.RuntimeException: Unexpected failure
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImpl.lambda$selectTariffForUser$0(TariffSelectionServiceImpl.java:36)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602)
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647)
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImpl.selectTariffForUser(TariffSelectionServiceImpl.java:44)
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImplTest.lambda$selectTariffForUser_shouldThrowTariffSelectionException_whenStrategyFails$0(TariffSelectionServiceImplTest.java:65)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
	at ru.noleg.scootrent.service.rental.tariffselect.TariffSelectionServiceImplTest.selectTariffForUser_shouldThrowTariffSelectionException_whenStrategyFails(TariffSelectionServiceImplTest.java:64)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Adding scooter model null.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Model with id: 1 successfully added.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Deleting scooter model with id: 100.
2025-05-20 02:23:00 [main] WARN  r.n.s.s.s.ScooterModelServiceImpl - Scooter model with id: 100 not found.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Fetching all scooter models.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Got 2 scooter models.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Fetching scooter model by id: 2.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Deleting scooter model with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Model with id: 1 successfully deleted.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Fetching scooter model by id: 100.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.s.ScooterModelServiceImpl - Scooter model with id: 100 not found.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: ABC123.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Scooter successfully added with id: 10.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Fetching scooter with id: 100.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.s.ScooterServiceDefaultImpl - Scooter with id: 100 not found.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: null.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.s.ScooterServiceDefaultImpl - Scooter model with id: 100 not found.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: null.
2025-05-20 02:23:00 [main] WARN  r.n.s.s.s.ScooterServiceDefaultImpl - Location with id:2 is not a rental point.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Deleting scooter with id: 100.
2025-05-20 02:23:00 [main] WARN  r.n.s.s.s.ScooterServiceDefaultImpl - Scooter with id: 100 not found.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Fetching scooter with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: null.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.s.ScooterServiceDefaultImpl - Location with id: 100 not found.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Deleting scooter with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Scooter with id: 1 successfully deleted.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Fetching all scooters.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Got 2 scooters.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Subscription 2 successfully assigned to user with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 02:23:00 [main] WARN  r.n.s.s.t.SubscriptionServiceImpl - Tariff with id: 2 is not a subscription and cannot assigned.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 02:23:00 [main] WARN  r.n.s.s.t.SubscriptionServiceImpl - User already been assigned a subscription with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - User with id: 1 not found.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Cansel subscription from user 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Subscription 2 successfully canselt.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - Tariff with id: 2 not found.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Cansel subscription from user 1.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - Subscription not found for user with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.SubscriptionServiceImpl - Assign subscription with limit = 100.
2025-05-20 02:23:00 [main] WARN  r.n.s.s.t.SubscriptionServiceImpl - Tariff with id: 2 is not active.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.t.SubscriptionServiceImpl - Subscription not found for user with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 02:23:00 [main] WARN  r.n.s.s.t.TariffAssignmentServiceImpl - Tariff with id: 2 is not active.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - Special tariff not found for user with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - User with id: 1 not found.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Cansel tariff from user 1.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - Special tariff not found for user with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.t.TariffAssignmentServiceImpl - Tariff with id: 2 not found.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 02:23:00 [main] WARN  r.n.s.s.t.TariffAssignmentServiceImpl - User already been assigned a special tariff with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 02:23:00 [main] WARN  r.n.s.s.t.TariffAssignmentServiceImpl - Tariff with id: 2 is a subscription and cannot assigned.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Assign tariff with new price = 5.25, discount = 20.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Tariff 2 successfully assigned to user 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Cansel tariff from user 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.t.TariffAssignmentServiceImpl - Tariff 2 successfully canselt.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Activating tariff with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 02:23:00 [main] WARN  r.n.s.s.tariff.TariffServiceImpl - Tariff already activated.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Creating tariff: null.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Tariff created with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 100.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.tariff.TariffServiceImpl - Tariff with id: 100 not found.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching list active tariffs.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Got 2 active tariffs.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching list tariffs.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Deactivating tariff with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 02:23:00 [main] WARN  r.n.s.s.tariff.TariffServiceImpl - Tariff already deactivated.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Deactivating tariff with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Tariff with id 1 successfully deactivated.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Activating tariff with id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Fetching tariff by id: 1.
2025-05-20 02:23:00 [main] DEBUG r.n.s.s.tariff.TariffServiceImpl - Tariff with id 1 successfully activated.
2025-05-20 02:23:00 [main] ERROR r.n.s.s.user.UserDetailsServiceImpl - User with username: notfound not found.
2025-05-20 02:23:01 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 02:23:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 02:23:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 21:21:15 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 21.0.4 with PID 14524 (started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 21:21:15 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 21:21:15 [main] INFO  r.n.s.ScootRentApplicationTests - The following 1 profile is active: "test"
2025-05-20 21:21:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 21:21:20 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@448892f1
2025-05-20 21:21:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 21:21:20 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:51842/testdb?loggerLevel=OFF (PostgreSQL 16.8)
2025-05-20 21:21:20 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 21:21:20 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.107s)
2025-05-20 21:21:21 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 21:21:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 21:21:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 21:21:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 21:21:22 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 15 migrations to schema "public", now at version v2.7 (execution time 00:00.346s)
2025-05-20 21:21:22 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 21:21:22 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 21:21:22 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 21:21:23 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 21:21:23 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.8
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 21:21:26 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 21:21:26 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 21:21:26 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-20 21:21:26 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getChildrenLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByIdAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByCoordinatesAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.validateStartRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.pause.RentalPauserImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.updateRentalStatus' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:26 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.UserTariffCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added DefaultTariffCostStrategy for tariff with type: DEFAULT_TARIFF.
2025-05-20 21:21:27 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added SubscriptionCostStrategy$$SpringCGLIB$$0 for tariff with type: SUBSCRIPTION.
2025-05-20 21:21:27 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added UserTariffCostStrategy$$SpringCGLIB$$0 for tariff with type: SPECIAL_TARIFF.
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.validateAndGetLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentals' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getAllScooters' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getScooterModel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getAllTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.activateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.deactivateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.createTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getActiveTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.createUserSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.subscribeUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.canselSubscriptionFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getActiveSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.validateCurrentTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.assignTariffToUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getActiveUserTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.canselTariffFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:21:27 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-20 21:21:29 [main] INFO  r.n.s.ScootRentApplicationTests - Started ScootRentApplicationTests in 14.496 seconds (process running for 27.052)
2025-05-20 21:21:29 [main] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 21:21:30 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 21:21:30 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'admin'.
2025-05-20 21:21:31 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 21:21:31 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'moderator'.
2025-05-20 21:21:31 [main] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 21:21:33 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 21:21:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 21:21:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 21:23:09 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 21.0.4 with PID 6704 (started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 21:23:09 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 21:23:09 [main] INFO  r.n.s.ScootRentApplicationTests - The following 1 profile is active: "test"
2025-05-20 21:23:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 21:23:13 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7323c38c
2025-05-20 21:23:13 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 21:23:13 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:51923/testdb?loggerLevel=OFF (PostgreSQL 16.8)
2025-05-20 21:23:13 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 21:23:13 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.081s)
2025-05-20 21:23:13 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 21:23:13 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 21:23:13 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 21:23:13 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 21:23:13 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 21:23:13 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 21:23:13 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 21:23:13 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 21:23:13 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 21:23:14 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 21:23:14 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 21:23:14 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 21:23:14 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 21:23:14 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 21:23:14 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 21:23:14 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 21:23:14 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 21:23:14 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 15 migrations to schema "public", now at version v2.7 (execution time 00:00.312s)
2025-05-20 21:23:14 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 21:23:14 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 21:23:14 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 21:23:15 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 21:23:15 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.8
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 21:23:17 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 21:23:17 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 21:23:18 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-20 21:23:18 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByCoordinatesAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getChildrenLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByIdAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.validateAndGetLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.pause.RentalPauserImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.UserTariffCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added DefaultTariffCostStrategy for tariff with type: DEFAULT_TARIFF.
2025-05-20 21:23:18 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added SubscriptionCostStrategy$$SpringCGLIB$$0 for tariff with type: SUBSCRIPTION.
2025-05-20 21:23:18 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added UserTariffCostStrategy$$SpringCGLIB$$0 for tariff with type: SPECIAL_TARIFF.
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentals' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getAllScooters' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getScooterModel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.deactivateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.createTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getAllTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getActiveTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.activateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.canselSubscriptionFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getActiveSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.subscribeUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getActiveUserTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.canselTariffFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.assignTariffToUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:23:18 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-20 21:23:20 [main] INFO  r.n.s.ScootRentApplicationTests - Started ScootRentApplicationTests in 11.67 seconds (process running for 22.316)
2025-05-20 21:23:20 [main] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 21:23:21 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 21:23:21 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'admin'.
2025-05-20 21:23:21 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 21:23:21 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'moderator'.
2025-05-20 21:23:21 [main] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 21:23:23 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 21:23:23 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 21:23:23 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 21:27:46 [main] INFO  r.n.s.ScootRentApplicationTests - Starting ScootRentApplicationTests using Java 21.0.4 with PID 31224 (started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 21:27:46 [main] DEBUG r.n.s.ScootRentApplicationTests - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 21:27:46 [main] INFO  r.n.s.ScootRentApplicationTests - The following 1 profile is active: "test"
2025-05-20 21:27:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 21:27:50 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@543ac221
2025-05-20 21:27:50 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 21:27:50 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:52475/testdb?loggerLevel=OFF (PostgreSQL 16.8)
2025-05-20 21:27:50 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 21:27:50 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.086s)
2025-05-20 21:27:50 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 21:27:50 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 21:27:50 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 21:27:50 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 21:27:50 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 21:27:51 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 15 migrations to schema "public", now at version v2.7 (execution time 00:00.313s)
2025-05-20 21:27:51 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 21:27:51 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 21:27:51 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 21:27:52 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 21:27:52 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.8
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 21:27:55 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 21:27:55 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [c_max_speed] in table [t_scooter_model]; found [bool (Types#BIT)], but expecting [integer (Types#INTEGER)]
2025-05-20 21:27:55 [main] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [c_max_speed] in table [t_scooter_model]; found [bool (Types#BIT)], but expecting [integer (Types#INTEGER)]
2025-05-20 21:27:55 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 21:27:55 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 21:27:55 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 21:27:55 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [c_max_speed] in table [t_scooter_model]; found [bool (Types#BIT)], but expecting [integer (Types#INTEGER)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [c_max_speed] in table [t_scooter_model]; found [bool (Types#BIT)], but expecting [integer (Types#INTEGER)]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 94 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [c_max_speed] in table [t_scooter_model]; found [bool (Types#BIT)], but expecting [integer (Types#INTEGER)]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateColumnType(AbstractSchemaValidator.java:169)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:156)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:99)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:77)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:289)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 98 common frames omitted
2025-05-20 21:27:55 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.noleg.scootrent.ScootRentApplicationTests@77107573]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@5f0b2fe1 testClass = ru.noleg.scootrent.ScootRentApplicationTests, locations = [], classes = [ru.noleg.scootrent.ScootRentApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1ab06251, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@59e505b2, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@31add175, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@291f18, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@16eccb2e, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@30c93896, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@54ed33fd, org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@ea97319d], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:200)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:139)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [ru/noleg/scootrent/configuration/JpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [c_max_speed] in table [t_scooter_model]; found [bool (Types#BIT)], but expecting [integer (Types#INTEGER)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [c_max_speed] in table [t_scooter_model]; found [bool (Types#BIT)], but expecting [integer (Types#INTEGER)]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:431)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 94 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [c_max_speed] in table [t_scooter_model]; found [bool (Types#BIT)], but expecting [integer (Types#INTEGER)]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateColumnType(AbstractSchemaValidator.java:169)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:156)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:99)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:77)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:289)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	... 98 common frames omitted
2025-05-20 21:43:05 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 19812 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 21:43:05 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 21:43:05 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-20 21:43:07 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-20 21:43:07 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-20 21:43:07 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-20 21:43:07 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-20 21:43:07 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2862 ms
2025-05-20 21:43:08 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 21:43:08 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2262f0d8
2025-05-20 21:43:08 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 21:43:08 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://0.0.0.0:5432/scootrent_db (PostgreSQL 16.8)
2025-05-20 21:43:08 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 21:43:08 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.072s)
2025-05-20 21:43:08 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 21:43:09 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 21:43:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 21:43:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 21:43:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 21:43:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 21:43:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 21:43:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 21:43:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 21:43:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 21:43:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 21:43:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 21:43:10 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 21:43:10 [main] ERROR o.f.core.internal.command.DbMigrate - Migration of schema "public" to version "2.3 - insert scooters" failed! Changes successfully rolled back.
2025-05-20 21:43:10 [main] ERROR o.s.b.w.e.tomcat.TomcatStarter - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtRequestFilter' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\security\jwt\JwtRequestFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
2025-05-20 21:43:10 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-05-20 21:43:10 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1 housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1758)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1070)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-20 21:43:10 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1 connection adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1758)
 java.base/java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:460)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1069)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-20 21:43:10 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-05-20 21:43:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 21:43:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 21:43:10 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 21:43:10 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:170)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.noleg.scootrent.ScootRentApplication.main(ScootRentApplication.java:10)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:147)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:517)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:219)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:193)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	... 8 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtRequestFilter' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\security\jwt\JwtRequestFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:211)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:174)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:169)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:154)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:87)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:271)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:245)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4467)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:415)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	... 13 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1667)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1555)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 54 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessProperties(PersistenceAnnotationBeanPostProcessor.java:389)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1445)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1667)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1555)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 68 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V2_3__insert_scooters.sql failed
---------------------------------------
SQL State  : 23505
Error Code : 0
Message    : ERROR: duplicate key value violates unique constraint "t_scooter_pkey"
  Подробности: Key (c_id)=(1) already exists.
Location   : db/migration/V2_3__insert_scooters.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V2_3__insert_scooters.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:227)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1525)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1483)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1451)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findDefaultEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:594)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:558)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:725)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:698)
	at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:272)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessProperties(PersistenceAnnotationBeanPostProcessor.java:386)
	... 80 common frames omitted
Caused by: org.flywaydb.core.internal.exception.FlywayMigrateException: Script V2_3__insert_scooters.sql failed
---------------------------------------
SQL State  : 23505
Error Code : 0
Message    : ERROR: duplicate key value violates unique constraint "t_scooter_pkey"
  Подробности: Key (c_id)=(1) already exists.
Location   : db/migration/V2_3__insert_scooters.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V2_3__insert_scooters.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:399)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:283)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:282)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:255)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:153)
	at org.flywaydb.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:77)
	at org.flywaydb.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:60)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:60)
	at org.flywaydb.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:105)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:149)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:153)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:104)
	at org.flywaydb.core.Flyway.lambda$migrate$1(Flyway.java:230)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:176)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 98 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Script V2_3__insert_scooters.sql failed
---------------------------------------
SQL State  : 23505
Error Code : 0
Message    : ERROR: duplicate key value violates unique constraint "t_scooter_pkey"
  Подробности: Key (c_id)=(1) already exists.
Location   : db/migration/V2_3__insert_scooters.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V2_3__insert_scooters.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:256)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:217)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:137)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:75)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:66)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:31)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:65)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:391)
	... 117 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "t_scooter_pkey"
  Подробности: Key (c_id)=(1) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:356)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:341)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:317)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:312)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:210)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:88)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:212)
	... 123 common frames omitted
2025-05-20 21:45:20 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 14660 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 21:45:20 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 21:45:20 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-20 21:45:23 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-20 21:45:23 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-20 21:45:23 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-20 21:45:23 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-20 21:45:23 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2996 ms
2025-05-20 21:45:24 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 21:45:24 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3a588b5f
2025-05-20 21:45:24 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 21:45:24 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://0.0.0.0:5432/scootrent_db (PostgreSQL 16.8)
2025-05-20 21:45:24 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.139s)
2025-05-20 21:45:24 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 2.2
2025-05-20 21:45:25 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 21:45:25 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 21:45:25 [main] ERROR o.f.core.internal.command.DbMigrate - Migration of schema "public" to version "2.4 - insert users" failed! Changes successfully rolled back.
2025-05-20 21:45:25 [main] ERROR o.s.b.w.e.tomcat.TomcatStarter - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtRequestFilter' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\security\jwt\JwtRequestFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
2025-05-20 21:45:25 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-05-20 21:45:25 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1 housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1758)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1070)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-20 21:45:25 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1 connection adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/java.lang.Thread.sleep0(Native Method)
 java.base/java.lang.Thread.sleep(Thread.java:509)
 com.zaxxer.hikari.util.UtilityElf.quietlySleep(UtilityElf.java:53)
 com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:729)
 com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:703)
 java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-20 21:45:25 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-05-20 21:45:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 21:45:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 21:45:25 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 21:45:25 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:170)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.noleg.scootrent.ScootRentApplication.main(ScootRentApplication.java:10)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:147)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:517)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:219)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:193)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	... 8 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtRequestFilter' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\security\jwt\JwtRequestFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:211)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:174)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:169)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:154)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:87)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:271)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:245)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4467)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:415)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	... 13 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1667)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1555)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 54 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessProperties(PersistenceAnnotationBeanPostProcessor.java:389)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1445)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1667)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1555)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 68 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V2_4__insert_users.sql failed
------------------------------------
SQL State  : 23505
Error Code : 0
Message    : ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(12) already exists.
Location   : db/migration/V2_4__insert_users.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V2_4__insert_users.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:227)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1525)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1483)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1451)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findDefaultEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:594)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:558)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:725)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:698)
	at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:272)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessProperties(PersistenceAnnotationBeanPostProcessor.java:386)
	... 80 common frames omitted
Caused by: org.flywaydb.core.internal.exception.FlywayMigrateException: Script V2_4__insert_users.sql failed
------------------------------------
SQL State  : 23505
Error Code : 0
Message    : ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(12) already exists.
Location   : db/migration/V2_4__insert_users.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V2_4__insert_users.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:399)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:283)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:282)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:255)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:153)
	at org.flywaydb.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:77)
	at org.flywaydb.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:60)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:60)
	at org.flywaydb.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:105)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:149)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:153)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:104)
	at org.flywaydb.core.Flyway.lambda$migrate$1(Flyway.java:230)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:176)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 98 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Script V2_4__insert_users.sql failed
------------------------------------
SQL State  : 23505
Error Code : 0
Message    : ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(12) already exists.
Location   : db/migration/V2_4__insert_users.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V2_4__insert_users.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:256)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:217)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:137)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:75)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:66)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:31)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:65)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:391)
	... 117 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(12) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:356)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:341)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:317)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:312)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:210)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:88)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:212)
	... 123 common frames omitted
2025-05-20 21:46:35 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 28776 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 21:46:35 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 21:46:35 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-20 21:46:38 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-20 21:46:38 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-20 21:46:38 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-20 21:46:38 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-20 21:46:38 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2747 ms
2025-05-20 21:46:39 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 21:46:39 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2bdb5e0f
2025-05-20 21:46:39 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 21:46:39 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://0.0.0.0:5432/scootrent_db (PostgreSQL 16.8)
2025-05-20 21:46:39 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.094s)
2025-05-20 21:46:39 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 2.3
2025-05-20 21:46:39 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 21:46:39 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 21:46:39 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 21:46:39 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 21:46:39 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 4 migrations to schema "public", now at version v2.7 (execution time 00:00.066s)
2025-05-20 21:46:39 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 21:46:40 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 21:46:40 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 21:46:41 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 21:46:41 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.8
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 21:46:43 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 21:46:43 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 21:46:43 [main] DEBUG r.n.s.security.jwt.JwtRequestFilter - Filter 'jwtRequestFilter' configured for use
2025-05-20 21:46:44 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-20 21:46:44 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByCoordinatesAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getChildrenLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByIdAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.validateAndGetLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.pause.RentalPauserImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.UserTariffCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added DefaultTariffCostStrategy for tariff with type: DEFAULT_TARIFF.
2025-05-20 21:46:44 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added SubscriptionCostStrategy$$SpringCGLIB$$0 for tariff with type: SUBSCRIPTION.
2025-05-20 21:46:44 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added UserTariffCostStrategy$$SpringCGLIB$$0 for tariff with type: SPECIAL_TARIFF.
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentals' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getAllScooters' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getScooterModel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.deactivateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getActiveTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.activateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.createTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getAllTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.canselSubscriptionFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getActiveSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.subscribeUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getActiveUserTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.canselTariffFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.assignTariffToUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 21:46:44 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-20 21:46:46 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-20 21:46:46 [main] INFO  r.n.scootrent.ScootRentApplication - Started ScootRentApplication in 11.398 seconds (process running for 12.751)
2025-05-20 21:46:46 [main] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 21:46:47 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23505
2025-05-20 21:46:47 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(1) already exists.
2025-05-20 21:46:47 [main] ERROR r.n.s.r.util.BaseRepositoryImpl - Error on save entity User with id: null.
org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(1) already exists.] [insert into t_user (c_date_of_birthday,c_email,c_password,c_phone,c_role,c_username) values (?,?,?,?,?,?)]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy2/jdk.proxy2.$Proxy143.persist(Unknown Source)
	at ru.noleg.scootrent.repository.util.BaseRepositoryImpl.save(BaseRepositoryImpl.java:33)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.save(<generated>)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.initUser(PrivilegedUsersSetup.java:69)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run(PrivilegedUsersSetup.java:44)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup$$SpringCGLIB$$0.run(<generated>)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.noleg.scootrent.ScootRentApplication.main(ScootRentApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(1) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 68 common frames omitted
2025-05-20 21:46:47 [main] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run] after exception: ru.noleg.scootrent.exception.RepositoryException: Repository error on save entity.
2025-05-20 21:46:47 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 21:46:47 [main] ERROR o.s.boot.SpringApplication - Application run failed
ru.noleg.scootrent.exception.RepositoryException: Repository error on save entity.
	at ru.noleg.scootrent.repository.util.BaseRepositoryImpl.save(BaseRepositoryImpl.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.save(<generated>)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.initUser(PrivilegedUsersSetup.java:69)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run(PrivilegedUsersSetup.java:44)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup$$SpringCGLIB$$0.run(<generated>)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.noleg.scootrent.ScootRentApplication.main(ScootRentApplication.java:10)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(1) already exists.] [insert into t_user (c_date_of_birthday,c_email,c_password,c_phone,c_role,c_username) values (?,?,?,?,?,?)]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy2/jdk.proxy2.$Proxy143.persist(Unknown Source)
	at ru.noleg.scootrent.repository.util.BaseRepositoryImpl.save(BaseRepositoryImpl.java:33)
	... 41 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(1) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 68 common frames omitted
2025-05-20 21:46:47 [main] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-20 21:46:47 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-20 21:46:47 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 21:46:47 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 21:46:47 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 22:10:11 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 8660 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 22:10:11 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 22:10:11 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-20 22:10:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-20 22:10:14 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-20 22:10:14 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-20 22:10:14 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-20 22:10:14 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2843 ms
2025-05-20 22:10:14 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 22:10:14 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4c2ab536
2025-05-20 22:10:14 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 22:10:14 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://0.0.0.0:5432/scootrent_db (PostgreSQL 16.8)
2025-05-20 22:10:14 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 22:10:15 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.111s)
2025-05-20 22:10:15 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 22:10:15 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 22:10:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 22:10:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 22:10:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 22:10:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 22:10:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 22:10:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 22:10:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 22:10:15 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 22:10:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 22:10:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 22:10:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 22:10:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 22:10:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 22:10:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 22:10:16 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 22:10:16 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 15 migrations to schema "public", now at version v2.7 (execution time 00:00.569s)
2025-05-20 22:10:16 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 22:10:16 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 22:10:16 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 22:10:17 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 22:10:17 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.8
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 22:10:19 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 22:10:19 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 22:10:20 [main] DEBUG r.n.s.security.jwt.JwtRequestFilter - Filter 'jwtRequestFilter' configured for use
2025-05-20 22:10:20 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-20 22:10:20 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getChildrenLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByIdAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByCoordinatesAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.pause.RentalPauserImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.UserTariffCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added DefaultTariffCostStrategy for tariff with type: DEFAULT_TARIFF.
2025-05-20 22:10:20 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added SubscriptionCostStrategy$$SpringCGLIB$$0 for tariff with type: SUBSCRIPTION.
2025-05-20 22:10:20 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added UserTariffCostStrategy$$SpringCGLIB$$0 for tariff with type: SPECIAL_TARIFF.
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentals' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getAllScooters' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getScooterModel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.createTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.activateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.deactivateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getAllTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getActiveTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getActiveSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.canselSubscriptionFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.subscribeUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getActiveUserTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.canselTariffFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.assignTariffToUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:20 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:10:21 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-20 22:10:21 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-20 22:10:22 [main] INFO  r.n.scootrent.ScootRentApplication - Started ScootRentApplication in 11.767 seconds (process running for 13.366)
2025-05-20 22:10:22 [main] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 22:10:23 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23505
2025-05-20 22:10:23 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(20) already exists.
2025-05-20 22:10:23 [main] ERROR r.n.s.r.util.BaseRepositoryImpl - Error on save entity User with id: null.
org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(20) already exists.] [insert into t_user (c_date_of_birthday,c_email,c_password,c_phone,c_role,c_username) values (?,?,?,?,?,?)]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy2/jdk.proxy2.$Proxy143.persist(Unknown Source)
	at ru.noleg.scootrent.repository.util.BaseRepositoryImpl.save(BaseRepositoryImpl.java:33)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.save(<generated>)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.initUser(PrivilegedUsersSetup.java:69)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run(PrivilegedUsersSetup.java:44)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup$$SpringCGLIB$$0.run(<generated>)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.noleg.scootrent.ScootRentApplication.main(ScootRentApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(20) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 68 common frames omitted
2025-05-20 22:10:23 [main] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run] after exception: ru.noleg.scootrent.exception.RepositoryException: Repository error on save entity.
2025-05-20 22:10:23 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 22:10:23 [main] ERROR o.s.boot.SpringApplication - Application run failed
ru.noleg.scootrent.exception.RepositoryException: Repository error on save entity.
	at ru.noleg.scootrent.repository.util.BaseRepositoryImpl.save(BaseRepositoryImpl.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.save(<generated>)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.initUser(PrivilegedUsersSetup.java:69)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run(PrivilegedUsersSetup.java:44)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.security.init.PrivilegedUsersSetup$$SpringCGLIB$$0.run(<generated>)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.noleg.scootrent.ScootRentApplication.main(ScootRentApplication.java:10)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(20) already exists.] [insert into t_user (c_date_of_birthday,c_email,c_password,c_phone,c_role,c_username) values (?,?,?,?,?,?)]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy2/jdk.proxy2.$Proxy143.persist(Unknown Source)
	at ru.noleg.scootrent.repository.util.BaseRepositoryImpl.save(BaseRepositoryImpl.java:33)
	... 41 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "t_user_pkey"
  Подробности: Key (c_id)=(20) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 68 common frames omitted
2025-05-20 22:10:23 [main] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-20 22:10:23 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-20 22:10:23 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 22:10:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 22:10:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 22:11:03 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 26352 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 22:11:03 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 22:11:03 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-20 22:11:06 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-20 22:11:06 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-20 22:11:06 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-20 22:11:06 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-20 22:11:06 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2867 ms
2025-05-20 22:11:07 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 22:11:07 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3b770d07
2025-05-20 22:11:07 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 22:11:07 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://0.0.0.0:5432/scootrent_db (PostgreSQL 16.8)
2025-05-20 22:11:07 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 22:11:07 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.064s)
2025-05-20 22:11:07 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 22:11:08 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 22:11:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 22:11:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 22:11:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 22:11:09 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 22:11:09 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 15 migrations to schema "public", now at version v2.7 (execution time 00:00.550s)
2025-05-20 22:11:09 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 22:11:09 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 22:11:09 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 22:11:10 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 22:11:10 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.8
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 22:11:12 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 22:11:12 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 22:11:13 [main] DEBUG r.n.s.security.jwt.JwtRequestFilter - Filter 'jwtRequestFilter' configured for use
2025-05-20 22:11:13 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-20 22:11:13 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByIdAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getChildrenLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByCoordinatesAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.validateStartRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.pause.RentalPauserImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.validateRentalStatusForResume' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.UserTariffCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added DefaultTariffCostStrategy for tariff with type: DEFAULT_TARIFF.
2025-05-20 22:11:13 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added SubscriptionCostStrategy$$SpringCGLIB$$0 for tariff with type: SUBSCRIPTION.
2025-05-20 22:11:13 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added UserTariffCostStrategy$$SpringCGLIB$$0 for tariff with type: SPECIAL_TARIFF.
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentals' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getAllScooters' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getScooterModel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.activateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.createTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getAllTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.deactivateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getActiveTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.canselSubscriptionFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getActiveSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.subscribeUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.canselTariffFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getActiveUserTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.assignTariffToUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:11:13 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-20 22:11:14 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-20 22:11:14 [main] INFO  r.n.scootrent.ScootRentApplication - Started ScootRentApplication in 11.878 seconds (process running for 13.33)
2025-05-20 22:11:14 [main] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 22:11:15 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 22:11:15 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'admin'.
2025-05-20 22:11:16 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 22:11:16 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'moderator'.
2025-05-20 22:11:16 [main] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 22:11:43 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-20 22:11:43 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-20 22:11:43 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-05-20 22:11:43 [http-nio-8080-exec-1] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/auth/sign-in.
2025-05-20 22:11:43 [http-nio-8080-exec-1] DEBUG r.n.s.security.jwt.JwtRequestFilter - No JWT token found in request headers for /api/auth/sign-in.
2025-05-20 22:11:44 [http-nio-8080-exec-1] INFO  r.n.s.c.a.AuthenticationController - Request: POST /signIn authentication user with username: moderator.
2025-05-20 22:11:44 [http-nio-8080-exec-1] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn]
2025-05-20 22:11:44 [http-nio-8080-exec-1] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: moderator.
2025-05-20 22:11:44 [http-nio-8080-exec-1] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User: moderator, successfully signIn.
2025-05-20 22:11:44 [http-nio-8080-exec-1] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn]
2025-05-20 22:11:44 [http-nio-8080-exec-1] INFO  r.n.s.c.a.AuthenticationController - User with username: moderator successfully authenticated.
2025-05-20 22:12:31 [http-nio-8080-exec-2] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/scooters.
2025-05-20 22:12:31 [http-nio-8080-exec-2] DEBUG r.n.s.security.jwt.JwtRequestFilter - Authenticating user moderator.
2025-05-20 22:12:31 [http-nio-8080-exec-2] DEBUG r.n.s.security.jwt.JwtRequestFilter - JWT token is valid for user: moderator.
2025-05-20 22:12:31 [http-nio-8080-exec-2] INFO  r.n.s.security.jwt.JwtRequestFilter - Successfully authenticated user: moderator for request /api/scooters.
2025-05-20 22:12:31 [http-nio-8080-exec-2] INFO  r.n.s.c.scooter.ScooterController - Request: POST added scooter with number plate: T123PC.
2025-05-20 22:12:31 [http-nio-8080-exec-2] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add]
2025-05-20 22:12:31 [http-nio-8080-exec-2] DEBUG r.n.s.s.s.ScooterServiceDefaultImpl - Adding scooter with number plate: T123PC.
2025-05-20 22:12:31 [http-nio-8080-exec-2] DEBUG r.n.s.r.util.BaseRepositoryImpl - ScooterModel with id: 1 exist.
2025-05-20 22:12:31 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23505
2025-05-20 22:12:31 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ERROR: duplicate key value violates unique constraint "t_scooter_pkey"
  Подробности: Key (c_id)=(1) already exists.
2025-05-20 22:12:31 [http-nio-8080-exec-2] ERROR r.n.s.r.util.BaseRepositoryImpl - Error on save entity Scooter with id: null.
org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint "t_scooter_pkey"
  Подробности: Key (c_id)=(1) already exists.] [insert into t_scooter (c_duration_in_used,c_model_id,c_number_plate,c_rental_point_id,c_status) values (?,?,?,?,?)]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:364)
	at jdk.proxy2/jdk.proxy2.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy2/jdk.proxy2.$Proxy143.persist(Unknown Source)
	at ru.noleg.scootrent.repository.util.BaseRepositoryImpl.save(BaseRepositoryImpl.java:33)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.ScooterRepositoryJpaImpl$$SpringCGLIB$$0.save(<generated>)
	at ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add(ScooterServiceDefaultImpl.java:43)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl$$SpringCGLIB$$0.add(<generated>)
	at ru.noleg.scootrent.controller.scooter.ScooterController.addScooter(ScooterController.java:61)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.controller.scooter.ScooterController$$SpringCGLIB$$0.addScooter(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.noleg.scootrent.security.jwt.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:83)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "t_scooter_pkey"
  Подробности: Key (c_id)=(1) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 159 common frames omitted
2025-05-20 22:12:31 [http-nio-8080-exec-2] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add] after exception: ru.noleg.scootrent.exception.RepositoryException: Repository error on save entity.
2025-05-20 22:12:31 [http-nio-8080-exec-2] ERROR r.n.s.e.h.GlobalExceptionHandler - Exception occurred: Repository error on save entity..
ru.noleg.scootrent.exception.RepositoryException: Repository error on save entity.
	at ru.noleg.scootrent.repository.util.BaseRepositoryImpl.save(BaseRepositoryImpl.java:47)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.ScooterRepositoryJpaImpl$$SpringCGLIB$$0.save(<generated>)
	at ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add(ScooterServiceDefaultImpl.java:43)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl$$SpringCGLIB$$0.add(<generated>)
	at ru.noleg.scootrent.controller.scooter.ScooterController.addScooter(ScooterController.java:61)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.controller.scooter.ScooterController$$SpringCGLIB$$0.addScooter(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.noleg.scootrent.security.jwt.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:83)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: duplicate key value violates unique constraint "t_scooter_pkey"
  Подробности: Key (c_id)=(1) already exists.] [insert into t_scooter (c_duration_in_used,c_model_id,c_number_plate,c_rental_point_id,c_status) values (?,?,?,?,?)]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:364)
	at jdk.proxy2/jdk.proxy2.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy2/jdk.proxy2.$Proxy143.persist(Unknown Source)
	at ru.noleg.scootrent.repository.util.BaseRepositoryImpl.save(BaseRepositoryImpl.java:33)
	... 128 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "t_scooter_pkey"
  Подробности: Key (c_id)=(1) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 159 common frames omitted
2025-05-20 22:14:02 [http-nio-8080-exec-3] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/auth/sign-up.
2025-05-20 22:14:02 [http-nio-8080-exec-3] DEBUG r.n.s.security.jwt.JwtRequestFilter - No JWT token found in request headers for /api/auth/sign-up.
2025-05-20 22:14:02 [http-nio-8080-exec-3] INFO  r.n.s.c.a.AuthenticationController - Request: POST /signUp registration user with username: olegSandr.
2025-05-20 22:14:02 [http-nio-8080-exec-3] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp]
2025-05-20 22:14:02 [http-nio-8080-exec-3] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: olegSandr.
2025-05-20 22:14:02 [http-nio-8080-exec-3] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 22:14:02 [http-nio-8080-exec-3] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User successfully signUp with id: 23.
2025-05-20 22:14:02 [http-nio-8080-exec-3] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp]
2025-05-20 22:14:02 [http-nio-8080-exec-3] INFO  r.n.s.c.a.AuthenticationController - User with username: olegSandr successfully registered.
2025-05-20 22:14:26 [http-nio-8080-exec-4] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/auth/sign-in.
2025-05-20 22:14:26 [http-nio-8080-exec-4] DEBUG r.n.s.security.jwt.JwtRequestFilter - No JWT token found in request headers for /api/auth/sign-in.
2025-05-20 22:14:26 [http-nio-8080-exec-4] INFO  r.n.s.c.a.AuthenticationController - Request: POST /signIn authentication user with username: admin.
2025-05-20 22:14:26 [http-nio-8080-exec-4] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn]
2025-05-20 22:14:26 [http-nio-8080-exec-4] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: admin.
2025-05-20 22:14:26 [http-nio-8080-exec-4] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User: admin, successfully signIn.
2025-05-20 22:14:26 [http-nio-8080-exec-4] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn]
2025-05-20 22:14:26 [http-nio-8080-exec-4] INFO  r.n.s.c.a.AuthenticationController - User with username: admin successfully authenticated.
2025-05-20 22:15:08 [http-nio-8080-exec-5] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/admin/users.
2025-05-20 22:15:08 [http-nio-8080-exec-5] DEBUG r.n.s.security.jwt.JwtRequestFilter - Authenticating user admin.
2025-05-20 22:15:08 [http-nio-8080-exec-5] DEBUG r.n.s.security.jwt.JwtRequestFilter - JWT token is valid for user: admin.
2025-05-20 22:15:08 [http-nio-8080-exec-5] INFO  r.n.s.security.jwt.JwtRequestFilter - Successfully authenticated user: admin for request /api/admin/users.
2025-05-20 22:15:08 [http-nio-8080-exec-5] INFO  r.n.s.c.rolebased.AdminController - Request: GET fetching all users.
2025-05-20 22:15:08 [http-nio-8080-exec-5] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers]
2025-05-20 22:15:08 [http-nio-8080-exec-5] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetch all entities User.
2025-05-20 22:15:08 [http-nio-8080-exec-5] DEBUG r.n.s.r.util.BaseRepositoryImpl - Found 23 User entities.
2025-05-20 22:15:08 [http-nio-8080-exec-5] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers]
2025-05-20 22:15:08 [http-nio-8080-exec-5] INFO  r.n.s.c.rolebased.AdminController - Got 23 users.
2025-05-20 22:39:38 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=18m481ms303µs800ns).
2025-05-20 22:49:24 [http-nio-8080-exec-7] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/admin/users.
2025-05-20 22:49:24 [http-nio-8080-exec-7] DEBUG r.n.s.security.jwt.JwtRequestFilter - Authenticating user admin.
2025-05-20 22:49:24 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@49762275 (Соединение уже было закрыто). Possibly consider using a shorter maxLifetime value.
2025-05-20 22:49:24 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3d0303d5 (Соединение уже было закрыто). Possibly consider using a shorter maxLifetime value.
2025-05-20 22:49:24 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3d32aafe (Соединение уже было закрыто). Possibly consider using a shorter maxLifetime value.
2025-05-20 22:49:24 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@45af52a7 (Соединение уже было закрыто). Possibly consider using a shorter maxLifetime value.
2025-05-20 22:49:24 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6c5b5a70 (Соединение уже было закрыто). Possibly consider using a shorter maxLifetime value.
2025-05-20 22:49:24 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@49e3f185 (Соединение уже было закрыто). Possibly consider using a shorter maxLifetime value.
2025-05-20 22:49:24 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@61aec71d (Соединение уже было закрыто). Possibly consider using a shorter maxLifetime value.
2025-05-20 22:49:24 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@5eab9be5 (Соединение уже было закрыто). Possibly consider using a shorter maxLifetime value.
2025-05-20 22:49:24 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@6815c29a (Соединение уже было закрыто). Possibly consider using a shorter maxLifetime value.
2025-05-20 22:49:24 [http-nio-8080-exec-7] WARN  com.zaxxer.hikari.pool.PoolBase - HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@3e2c79c4 (Соединение уже было закрыто). Possibly consider using a shorter maxLifetime value.
2025-05-20 22:49:24 [http-nio-8080-exec-7] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42P01
2025-05-20 22:49:24 [http-nio-8080-exec-7] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ERROR: relation "t_user" does not exist
  Позиция: 117
2025-05-20 22:49:24 [http-nio-8080-exec-7] ERROR r.n.s.r.impl.UserRepositoryJpaImpl - Failed to find user by username: admin.
org.hibernate.exception.SQLGrammarException: JDBC exception executing SQL [select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=?] [ERROR: relation "t_user" does not exist
  Позиция: 117] [n/a]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:91)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:268)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:171)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.<init>(JdbcValuesResultSetImpl.java:74)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:355)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:137)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:419)
	at jdk.proxy2/jdk.proxy2.$Proxy161.getResultList(Unknown Source)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:42)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.findByUsername(<generated>)
	at ru.noleg.scootrent.service.user.UserDetailsServiceImpl.loadUserByUsername(UserDetailsServiceImpl.java:24)
	at ru.noleg.scootrent.security.jwt.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:61)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "t_user" does not exist
  Позиция: 117
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:250)
	... 86 common frames omitted
2025-05-20 22:49:24 [http-nio-8080-exec-7] ERROR r.n.s.security.jwt.JwtRequestFilter - Authentication failed for request /api/admin/users.
ru.noleg.scootrent.exception.RepositoryException: Repository error on fetch user by username
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.findByUsername(<generated>)
	at ru.noleg.scootrent.service.user.UserDetailsServiceImpl.loadUserByUsername(UserDetailsServiceImpl.java:24)
	at ru.noleg.scootrent.security.jwt.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:61)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.SQLGrammarException: JDBC exception executing SQL [select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=?] [ERROR: relation "t_user" does not exist
  Позиция: 117] [n/a]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:91)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:268)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:171)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.<init>(JdbcValuesResultSetImpl.java:74)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:355)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:137)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:419)
	at jdk.proxy2/jdk.proxy2.$Proxy161.getResultList(Unknown Source)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:42)
	... 68 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: relation "t_user" does not exist
  Позиция: 117
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:250)
	... 86 common frames omitted
2025-05-20 22:49:24 [http-nio-8080-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [ru.noleg.scootrent.exception.RepositoryException: Repository error on fetch user by username] with root cause
org.postgresql.util.PSQLException: ERROR: relation "t_user" does not exist
  Позиция: 117
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:250)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:171)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.<init>(JdbcValuesResultSetImpl.java:74)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:355)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:137)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:419)
	at jdk.proxy2/jdk.proxy2.$Proxy161.getResultList(Unknown Source)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:42)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.findByUsername(<generated>)
	at ru.noleg.scootrent.service.user.UserDetailsServiceImpl.loadUserByUsername(UserDetailsServiceImpl.java:24)
	at ru.noleg.scootrent.security.jwt.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:61)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-20 22:49:52 [http-nio-8080-exec-8] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/auth/sign-in.
2025-05-20 22:49:52 [http-nio-8080-exec-8] DEBUG r.n.s.security.jwt.JwtRequestFilter - No JWT token found in request headers for /api/auth/sign-in.
2025-05-20 22:49:52 [http-nio-8080-exec-8] INFO  r.n.s.c.a.AuthenticationController - Request: POST /signIn authentication user with username: moderator.
2025-05-20 22:49:52 [http-nio-8080-exec-8] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn]
2025-05-20 22:49:52 [http-nio-8080-exec-8] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: moderator.
2025-05-20 22:49:52 [http-nio-8080-exec-8] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42P01
2025-05-20 22:49:52 [http-nio-8080-exec-8] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ERROR: relation "t_user" does not exist
  Позиция: 117
2025-05-20 22:49:52 [http-nio-8080-exec-8] ERROR r.n.s.r.impl.UserRepositoryJpaImpl - Failed to find user by username: moderator.
org.hibernate.exception.SQLGrammarException: JDBC exception executing SQL [select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=?] [ERROR: relation "t_user" does not exist
  Позиция: 117] [n/a]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:91)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:268)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:171)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.<init>(JdbcValuesResultSetImpl.java:74)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:355)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:137)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:42)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.findByUsername(<generated>)
	at ru.noleg.scootrent.service.user.UserDetailsServiceImpl.loadUserByUsername(UserDetailsServiceImpl.java:24)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:107)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn(AuthenticationServiceJwtImpl.java:77)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl$$SpringCGLIB$$0.signIn(<generated>)
	at ru.noleg.scootrent.controller.auth.AuthenticationController.signIn(AuthenticationController.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.noleg.scootrent.security.jwt.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:49)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "t_user" does not exist
  Позиция: 117
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:250)
	... 137 common frames omitted
2025-05-20 22:49:52 [http-nio-8080-exec-8] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn] after exception: org.springframework.security.authentication.InternalAuthenticationServiceException: Repository error on fetch user by username
2025-05-20 22:49:52 [http-nio-8080-exec-8] ERROR r.n.s.e.h.GlobalExceptionHandler - Exception occurred: Repository error on fetch user by username.
org.springframework.security.authentication.InternalAuthenticationServiceException: Repository error on fetch user by username
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:122)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn(AuthenticationServiceJwtImpl.java:77)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl$$SpringCGLIB$$0.signIn(<generated>)
	at ru.noleg.scootrent.controller.auth.AuthenticationController.signIn(AuthenticationController.java:64)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.noleg.scootrent.security.jwt.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:49)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: ru.noleg.scootrent.exception.RepositoryException: Repository error on fetch user by username
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl$$SpringCGLIB$$0.findByUsername(<generated>)
	at ru.noleg.scootrent.service.user.UserDetailsServiceImpl.loadUserByUsername(UserDetailsServiceImpl.java:24)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:107)
	... 112 common frames omitted
Caused by: org.hibernate.exception.SQLGrammarException: JDBC exception executing SQL [select u1_0.c_id,u1_0.c_date_of_birthday,u1_0.c_email,u1_0.c_password,u1_0.c_phone,u1_0.c_role,u1_0.c_username from t_user u1_0 where u1_0.c_username=?] [ERROR: relation "t_user" does not exist
  Позиция: 117] [n/a]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:91)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:268)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:171)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.<init>(JdbcValuesResultSetImpl.java:74)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:355)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:137)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at ru.noleg.scootrent.repository.impl.UserRepositoryJpaImpl.findByUsername(UserRepositoryJpaImpl.java:42)
	... 123 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: relation "t_user" does not exist
  Позиция: 117
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:250)
	... 137 common frames omitted
2025-05-20 22:50:07 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-20 22:50:07 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-20 22:50:07 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 22:50:07 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 22:50:07 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 22:50:17 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 13640 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 22:50:17 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 22:50:17 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-20 22:50:20 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-20 22:50:20 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-20 22:50:20 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-20 22:50:20 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-20 22:50:20 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2893 ms
2025-05-20 22:50:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 22:50:21 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@8b670c0
2025-05-20 22:50:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 22:50:21 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://0.0.0.0:5432/scootrent_db (PostgreSQL 16.8)
2025-05-20 22:50:21 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 22:50:21 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.074s)
2025-05-20 22:50:21 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 22:50:21 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 22:50:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 22:50:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 22:50:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 22:50:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 22:50:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 22:50:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 22:50:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 22:50:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 22:50:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 22:50:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 22:50:22 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 22:50:23 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 22:50:23 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 22:50:23 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 22:50:23 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 22:50:23 [main] ERROR o.f.core.internal.command.DbMigrate - Migration of schema "public" to version "2.7 - insert user subscriptions" failed! Changes successfully rolled back.
2025-05-20 22:50:23 [main] ERROR o.s.b.w.e.tomcat.TomcatStarter - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtRequestFilter' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\security\jwt\JwtRequestFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
2025-05-20 22:50:23 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-05-20 22:50:23 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1 housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1758)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1070)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-20 22:50:23 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1 connection adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1758)
 java.base/java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:460)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1069)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-20 22:50:23 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-05-20 22:50:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 22:50:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 22:50:23 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 22:50:23 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:170)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.noleg.scootrent.ScootRentApplication.main(ScootRentApplication.java:10)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:147)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:517)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:219)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:193)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	... 8 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtRequestFilter' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\security\jwt\JwtRequestFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:211)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:174)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:169)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:154)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:87)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:271)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:245)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4467)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:415)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	... 13 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1667)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1555)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 54 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessProperties(PersistenceAnnotationBeanPostProcessor.java:389)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1445)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1667)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1555)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 68 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Script V2_7__insert_user_subscriptions.sql failed
-------------------------------------------------
SQL State  : 42601
Error Code : 0
Message    : ERROR: syntax error at or near "ALTER"
  Позиция: 877
Location   : db/migration/V2_7__insert_user_subscriptions.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V2_7__insert_user_subscriptions.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:227)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1525)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1483)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1451)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findDefaultEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:594)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:558)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:725)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:698)
	at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:272)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessProperties(PersistenceAnnotationBeanPostProcessor.java:386)
	... 80 common frames omitted
Caused by: org.flywaydb.core.internal.exception.FlywayMigrateException: Script V2_7__insert_user_subscriptions.sql failed
-------------------------------------------------
SQL State  : 42601
Error Code : 0
Message    : ERROR: syntax error at or near "ALTER"
  Позиция: 877
Location   : db/migration/V2_7__insert_user_subscriptions.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V2_7__insert_user_subscriptions.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:399)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:283)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:282)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:255)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:153)
	at org.flywaydb.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:77)
	at org.flywaydb.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:60)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:59)
	at org.flywaydb.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:60)
	at org.flywaydb.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:105)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:149)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:153)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:104)
	at org.flywaydb.core.Flyway.lambda$migrate$1(Flyway.java:230)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:176)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 98 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Script V2_7__insert_user_subscriptions.sql failed
-------------------------------------------------
SQL State  : 42601
Error Code : 0
Message    : ERROR: syntax error at or near "ALTER"
  Позиция: 877
Location   : db/migration/V2_7__insert_user_subscriptions.sql (C:\Users\nazar\java-project\scoot-rent\target\classes\db\migration\V2_7__insert_user_subscriptions.sql)
Line       : 1
Statement  : Run Flyway with -X option to see the actual statement causing the problem

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:256)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:217)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:137)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:75)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:66)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:31)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:65)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:391)
	... 117 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near "ALTER"
  Позиция: 877
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:356)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:341)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:317)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:312)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:210)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:88)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:212)
	... 123 common frames omitted
2025-05-20 22:51:21 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 39988 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 22:51:21 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 22:51:21 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-20 22:51:23 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-20 22:51:24 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-20 22:51:24 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-20 22:51:24 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-20 22:51:24 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2916 ms
2025-05-20 22:51:24 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 22:51:27 [main] ERROR o.s.b.w.e.tomcat.TomcatStarter - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtRequestFilter' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\security\jwt\JwtRequestFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
2025-05-20 22:51:27 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-05-20 22:51:27 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-05-20 22:51:27 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-20 22:51:27 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:170)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.noleg.scootrent.ScootRentApplication.main(ScootRentApplication.java:10)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:147)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:517)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:219)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:193)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	... 8 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtRequestFilter' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\security\jwt\JwtRequestFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:211)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:174)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:169)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:154)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:87)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:271)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:245)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4467)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:415)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	... 13 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDetailsServiceImpl' defined in file [C:\Users\nazar\java-project\scoot-rent\target\classes\ru\noleg\scootrent\service\user\UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1381)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1218)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1667)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1555)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 54 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepositoryJpaImpl': Injection of persistence dependencies failed
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessProperties(PersistenceAnnotationBeanPostProcessor.java:389)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1445)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1667)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1555)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 68 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unable to obtain connection from database: Подсоединение по адресу 0.0.0.0:5432 отклонено. Проверьте что хост и порт указаны правильно и что postmaster принимает TCP/IP-подсоединения.
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Подсоединение по адресу 0.0.0.0:5432 отклонено. Проверьте что хост и порт указаны правильно и что postmaster принимает TCP/IP-подсоединения.

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:227)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1525)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1483)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1451)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findDefaultEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:594)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:558)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:725)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:698)
	at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:272)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessProperties(PersistenceAnnotationBeanPostProcessor.java:386)
	... 80 common frames omitted
Caused by: org.flywaydb.core.internal.exception.FlywaySqlException: Unable to obtain connection from database: Подсоединение по адресу 0.0.0.0:5432 отклонено. Проверьте что хост и порт указаны правильно и что postmaster принимает TCP/IP-подсоединения.
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL State  : 08001
Error Code : 0
Message    : Подсоединение по адресу 0.0.0.0:5432 отклонено. Проверьте что хост и порт указаны правильно и что postmaster принимает TCP/IP-подсоединения.

	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:71)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:137)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:176)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	... 98 common frames omitted
Caused by: org.postgresql.util.PSQLException: Подсоединение по адресу 0.0.0.0:5432 отклонено. Проверьте что хост и порт указаны правильно и что postmaster принимает TCP/IP-подсоединения.
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:352)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:59)
	... 104 common frames omitted
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:260)
	at org.postgresql.core.PGStream.<init>(PGStream.java:121)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:140)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:268)
	... 116 common frames omitted
2025-05-20 22:51:44 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 28656 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 22:51:44 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 22:51:44 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-20 22:51:47 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-20 22:51:47 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-20 22:51:47 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-20 22:51:47 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-20 22:51:47 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3163 ms
2025-05-20 22:51:47 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 22:51:47 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@62b0bf85
2025-05-20 22:51:47 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 22:51:48 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://0.0.0.0:5432/scootrent_db (PostgreSQL 16.8)
2025-05-20 22:51:48 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 22:51:48 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.083s)
2025-05-20 22:51:48 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 22:51:48 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 22:51:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 22:51:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 22:51:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 22:51:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 22:51:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 22:51:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 22:51:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 22:51:49 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 22:51:49 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 22:51:49 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 22:51:49 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 22:51:49 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 22:51:49 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 22:51:49 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 22:51:49 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 22:51:49 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 15 migrations to schema "public", now at version v2.7 (execution time 00:00.571s)
2025-05-20 22:51:49 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 22:51:49 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 22:51:49 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 22:51:50 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 22:51:50 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.8
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 22:51:52 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 22:51:52 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 22:51:53 [main] DEBUG r.n.s.security.jwt.JwtRequestFilter - Filter 'jwtRequestFilter' configured for use
2025-05-20 22:51:53 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-20 22:51:53 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getChildrenLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByIdAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByCoordinatesAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.pause.RentalPauserImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.UserTariffCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added DefaultTariffCostStrategy for tariff with type: DEFAULT_TARIFF.
2025-05-20 22:51:53 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added SubscriptionCostStrategy$$SpringCGLIB$$0 for tariff with type: SUBSCRIPTION.
2025-05-20 22:51:53 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added UserTariffCostStrategy$$SpringCGLIB$$0 for tariff with type: SPECIAL_TARIFF.
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentals' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getAllScooters' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getScooterModel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.activateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getAllTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getActiveTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.createTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.deactivateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.canselSubscriptionFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getActiveSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.subscribeUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getActiveUserTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.canselTariffFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.assignTariffToUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:51:54 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-20 22:51:54 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-20 22:51:55 [main] INFO  r.n.scootrent.ScootRentApplication - Started ScootRentApplication in 11.908 seconds (process running for 13.365)
2025-05-20 22:51:55 [main] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 22:51:56 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 22:51:56 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'admin'.
2025-05-20 22:51:56 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 22:51:56 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'moderator'.
2025-05-20 22:51:56 [main] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 22:52:00 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-20 22:52:00 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-20 22:52:00 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-05-20 22:52:00 [http-nio-8080-exec-1] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/auth/sign-in.
2025-05-20 22:52:00 [http-nio-8080-exec-1] DEBUG r.n.s.security.jwt.JwtRequestFilter - No JWT token found in request headers for /api/auth/sign-in.
2025-05-20 22:52:00 [http-nio-8080-exec-1] INFO  r.n.s.c.a.AuthenticationController - Request: POST /signIn authentication user with username: moderator.
2025-05-20 22:52:00 [http-nio-8080-exec-1] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn]
2025-05-20 22:52:00 [http-nio-8080-exec-1] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: moderator.
2025-05-20 22:52:01 [http-nio-8080-exec-1] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User: moderator, successfully signIn.
2025-05-20 22:52:01 [http-nio-8080-exec-1] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn]
2025-05-20 22:52:01 [http-nio-8080-exec-1] INFO  r.n.s.c.a.AuthenticationController - User with username: moderator successfully authenticated.
2025-05-20 22:53:12 [http-nio-8080-exec-4] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/scooters/models.
2025-05-20 22:53:12 [http-nio-8080-exec-4] DEBUG r.n.s.security.jwt.JwtRequestFilter - Authenticating user admin.
2025-05-20 22:53:12 [http-nio-8080-exec-4] DEBUG r.n.s.security.jwt.JwtRequestFilter - JWT token is valid for user: admin.
2025-05-20 22:53:12 [http-nio-8080-exec-4] INFO  r.n.s.security.jwt.JwtRequestFilter - Successfully authenticated user: admin for request /api/scooters/models.
2025-05-20 22:53:12 [http-nio-8080-exec-4] INFO  r.n.s.c.s.ScooterModelController - Request: GET fetch all scooter models.
2025-05-20 22:53:12 [http-nio-8080-exec-4] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels]
2025-05-20 22:53:12 [http-nio-8080-exec-4] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Fetching all scooter models.
2025-05-20 22:53:12 [http-nio-8080-exec-4] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetch all entities ScooterModel.
2025-05-20 22:53:12 [http-nio-8080-exec-4] DEBUG r.n.s.r.util.BaseRepositoryImpl - Found 5 ScooterModel entities.
2025-05-20 22:53:12 [http-nio-8080-exec-4] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Got 5 scooter models.
2025-05-20 22:53:12 [http-nio-8080-exec-4] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels]
2025-05-20 22:53:12 [http-nio-8080-exec-4] INFO  r.n.s.c.s.ScooterModelController - Got 5 scooter models.
2025-05-20 22:53:45 [http-nio-8080-exec-3] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/scooters/models.
2025-05-20 22:53:45 [http-nio-8080-exec-3] DEBUG r.n.s.security.jwt.JwtRequestFilter - Authenticating user admin.
2025-05-20 22:53:45 [http-nio-8080-exec-3] DEBUG r.n.s.security.jwt.JwtRequestFilter - JWT token is valid for user: admin.
2025-05-20 22:53:45 [http-nio-8080-exec-3] INFO  r.n.s.security.jwt.JwtRequestFilter - Successfully authenticated user: admin for request /api/scooters/models.
2025-05-20 22:53:45 [http-nio-8080-exec-3] INFO  r.n.s.c.s.ScooterModelController - Request: POST added scooter model: Xiaomi scoot pro max duo.
2025-05-20 22:53:45 [http-nio-8080-exec-3] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add]
2025-05-20 22:53:45 [http-nio-8080-exec-3] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Adding scooter model Xiaomi scoot pro max duo.
2025-05-20 22:53:45 [http-nio-8080-exec-3] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity ScooterModel.
2025-05-20 22:53:45 [http-nio-8080-exec-3] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Model with id: 6 successfully added.
2025-05-20 22:53:45 [http-nio-8080-exec-3] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add]
2025-05-20 22:53:45 [http-nio-8080-exec-3] INFO  r.n.s.c.s.ScooterModelController - Scooter model added with id: 6.
2025-05-20 22:54:02 [http-nio-8080-exec-5] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/scooters/models.
2025-05-20 22:54:02 [http-nio-8080-exec-5] DEBUG r.n.s.security.jwt.JwtRequestFilter - Authenticating user admin.
2025-05-20 22:54:02 [http-nio-8080-exec-5] DEBUG r.n.s.security.jwt.JwtRequestFilter - JWT token is valid for user: admin.
2025-05-20 22:54:02 [http-nio-8080-exec-5] INFO  r.n.s.security.jwt.JwtRequestFilter - Successfully authenticated user: admin for request /api/scooters/models.
2025-05-20 22:54:02 [http-nio-8080-exec-5] INFO  r.n.s.c.s.ScooterModelController - Request: GET fetch all scooter models.
2025-05-20 22:54:02 [http-nio-8080-exec-5] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels]
2025-05-20 22:54:02 [http-nio-8080-exec-5] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Fetching all scooter models.
2025-05-20 22:54:02 [http-nio-8080-exec-5] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetch all entities ScooterModel.
2025-05-20 22:54:02 [http-nio-8080-exec-5] DEBUG r.n.s.r.util.BaseRepositoryImpl - Found 6 ScooterModel entities.
2025-05-20 22:54:02 [http-nio-8080-exec-5] DEBUG r.n.s.s.s.ScooterModelServiceImpl - Got 6 scooter models.
2025-05-20 22:54:02 [http-nio-8080-exec-5] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels]
2025-05-20 22:54:02 [http-nio-8080-exec-5] INFO  r.n.s.c.s.ScooterModelController - Got 6 scooter models.
2025-05-20 22:57:07 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-20 22:57:07 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-20 22:57:07 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 22:57:07 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 22:57:07 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 22:57:43 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 14076 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 22:57:43 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 22:57:43 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-20 22:57:46 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-20 22:57:46 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-20 22:57:46 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-20 22:57:46 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-20 22:57:46 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3051 ms
2025-05-20 22:57:47 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 22:57:47 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@734fbae3
2025-05-20 22:57:47 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 22:57:47 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://0.0.0.0:5432/scootrent_db (PostgreSQL 16.8)
2025-05-20 22:57:47 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 22:57:47 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 15 migrations (execution time 00:00.066s)
2025-05-20 22:57:47 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 22:57:47 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 22:57:47 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 22:57:47 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 22:57:47 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 22:57:47 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 22:57:48 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 15 migrations to schema "public", now at version v2.7 (execution time 00:00.574s)
2025-05-20 22:57:49 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 22:57:49 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 22:57:49 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 22:57:50 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 22:57:50 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.8
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 22:57:52 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 22:57:52 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 22:57:52 [main] DEBUG r.n.s.security.jwt.JwtRequestFilter - Filter 'jwtRequestFilter' configured for use
2025-05-20 22:57:52 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-20 22:57:52 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getChildrenLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByIdAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByCoordinatesAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.pause.RentalPauserImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.UserTariffCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added DefaultTariffCostStrategy for tariff with type: DEFAULT_TARIFF.
2025-05-20 22:57:52 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added SubscriptionCostStrategy$$SpringCGLIB$$0 for tariff with type: SUBSCRIPTION.
2025-05-20 22:57:52 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added UserTariffCostStrategy$$SpringCGLIB$$0 for tariff with type: SPECIAL_TARIFF.
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentals' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getAllScooters' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getScooterModel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getActiveTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.deactivateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getAllTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.createTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.activateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.subscribeUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.canselSubscriptionFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getActiveSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.assignTariffToUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.canselTariffFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:52 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getActiveUserTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 22:57:53 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 22:57:53 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-20 22:57:54 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-20 22:57:54 [main] INFO  r.n.scootrent.ScootRentApplication - Started ScootRentApplication in 12.043 seconds (process running for 13.492)
2025-05-20 22:57:54 [main] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 22:57:55 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 22:57:55 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'admin'.
2025-05-20 22:57:55 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 22:57:55 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'moderator'.
2025-05-20 22:57:55 [main] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 23:10:47 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-20 23:10:47 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-20 23:10:47 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-05-20 23:10:47 [http-nio-8080-exec-1] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/auth/sign-in.
2025-05-20 23:10:47 [http-nio-8080-exec-1] DEBUG r.n.s.security.jwt.JwtRequestFilter - No JWT token found in request headers for /api/auth/sign-in.
2025-05-20 23:10:48 [http-nio-8080-exec-1] INFO  r.n.s.c.a.AuthenticationController - Request: POST /signIn authentication user with username: admin.
2025-05-20 23:10:48 [http-nio-8080-exec-1] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn]
2025-05-20 23:10:48 [http-nio-8080-exec-1] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: admin.
2025-05-20 23:10:48 [http-nio-8080-exec-1] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User: admin, successfully signIn.
2025-05-20 23:10:48 [http-nio-8080-exec-1] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn]
2025-05-20 23:10:48 [http-nio-8080-exec-1] INFO  r.n.s.c.a.AuthenticationController - User with username: admin successfully authenticated.
2025-05-20 23:11:31 [http-nio-8080-exec-2] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/admin/users/5.
2025-05-20 23:11:31 [http-nio-8080-exec-2] DEBUG r.n.s.security.jwt.JwtRequestFilter - Authenticating user admin.
2025-05-20 23:11:31 [http-nio-8080-exec-2] DEBUG r.n.s.security.jwt.JwtRequestFilter - JWT token is valid for user: admin.
2025-05-20 23:11:31 [http-nio-8080-exec-2] INFO  r.n.s.security.jwt.JwtRequestFilter - Successfully authenticated user: admin for request /api/admin/users/5.
2025-05-20 23:11:31 [http-nio-8080-exec-2] INFO  r.n.s.c.rolebased.AdminController - Request: PATCH update user with id: 5 on role: ROLE_MODERATOR.
2025-05-20 23:11:31 [http-nio-8080-exec-2] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole]
2025-05-20 23:11:31 [http-nio-8080-exec-2] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetch entity User with id: 5.
2025-05-20 23:11:31 [http-nio-8080-exec-2] DEBUG r.n.s.r.util.BaseRepositoryImpl - Found entity User with id: 5.
2025-05-20 23:11:31 [http-nio-8080-exec-2] DEBUG r.n.s.r.util.BaseRepositoryImpl - Update entity User with id: 5.
2025-05-20 23:11:31 [http-nio-8080-exec-2] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole]
2025-05-20 23:11:31 [http-nio-8080-exec-2] INFO  r.n.s.c.rolebased.AdminController - Role for user with id: 5 successfully updated.
2025-05-20 23:11:40 [http-nio-8080-exec-3] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/admin/users.
2025-05-20 23:11:40 [http-nio-8080-exec-3] DEBUG r.n.s.security.jwt.JwtRequestFilter - Authenticating user admin.
2025-05-20 23:11:40 [http-nio-8080-exec-3] DEBUG r.n.s.security.jwt.JwtRequestFilter - JWT token is valid for user: admin.
2025-05-20 23:11:40 [http-nio-8080-exec-3] INFO  r.n.s.security.jwt.JwtRequestFilter - Successfully authenticated user: admin for request /api/admin/users.
2025-05-20 23:11:40 [http-nio-8080-exec-3] INFO  r.n.s.c.rolebased.AdminController - Request: GET fetching all users.
2025-05-20 23:11:40 [http-nio-8080-exec-3] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers]
2025-05-20 23:11:40 [http-nio-8080-exec-3] DEBUG r.n.s.r.util.BaseRepositoryImpl - Fetch all entities User.
2025-05-20 23:11:40 [http-nio-8080-exec-3] DEBUG r.n.s.r.util.BaseRepositoryImpl - Found 22 User entities.
2025-05-20 23:11:40 [http-nio-8080-exec-3] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers]
2025-05-20 23:11:40 [http-nio-8080-exec-3] INFO  r.n.s.c.rolebased.AdminController - Got 22 users.
2025-05-20 23:25:01 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-20 23:25:01 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-20 23:25:01 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 23:25:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 23:25:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-20 23:25:26 [main] INFO  r.n.scootrent.ScootRentApplication - Starting ScootRentApplication using Java 21.0.4 with PID 39188 (C:\Users\nazar\java-project\scoot-rent\target\classes started by nazar in C:\Users\nazar\java-project\scoot-rent)
2025-05-20 23:25:26 [main] DEBUG r.n.scootrent.ScootRentApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-20 23:25:26 [main] INFO  r.n.scootrent.ScootRentApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-20 23:25:29 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-20 23:25:29 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-20 23:25:29 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-20 23:25:29 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-20 23:25:29 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2783 ms
2025-05-20 23:25:30 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-20 23:25:30 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1fcaea93
2025-05-20 23:25:30 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-20 23:25:30 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://0.0.0.0:5432/scootrent_db (PostgreSQL 16.8)
2025-05-20 23:25:30 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "public"."flyway_schema_history" does not exist yet
2025-05-20 23:25:30 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 16 migrations (execution time 00:00.076s)
2025-05-20 23:25:30 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2025-05-20 23:25:30 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2025-05-20 23:25:30 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.1 - create scooter model"
2025-05-20 23:25:30 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.2 - create location node"
2025-05-20 23:25:30 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.3 - create scooter"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.4 - create user"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.5 - create tariff"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.6 - create user tariff"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.7 - create user subscriptions"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "1.8 - create rental"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.1 - insert scooterModels"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.2 - insert location node"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.3 - insert scooters"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.4 - insert users"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.5 - insert tariffs"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.6 - insert user tariffs"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.7 - insert user subscriptions"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "2.8 - insert rentals"
2025-05-20 23:25:31 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 16 migrations to schema "public", now at version v2.8 (execution time 00:00.585s)
2025-05-20 23:25:32 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-20 23:25:32 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-20 23:25:32 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-20 23:25:33 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-20 23:25:33 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.8
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-20 23:25:35 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-20 23:25:36 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 23:25:36 [main] DEBUG r.n.s.security.jwt.JwtRequestFilter - Filter 'jwtRequestFilter' configured for use
2025-05-20 23:25:36 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-20 23:25:36 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signUp' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByCoordinatesAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getAllLocations' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getLocationByIdAndType' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.location.LocationServiceImpl.getChildrenLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.validateAndGetScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.start.RentalStarterImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.pause.RentalPauserImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.resume.RentalResumerImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.SubscriptionCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.billing.strategy.UserTariffCostStrategy.calculate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added DefaultTariffCostStrategy for tariff with type: DEFAULT_TARIFF.
2025-05-20 23:25:36 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added SubscriptionCostStrategy$$SpringCGLIB$$0 for tariff with type: SUBSCRIPTION.
2025-05-20 23:25:36 [main] DEBUG r.n.s.s.r.billing.BillingServiceImpl - Strategy added UserTariffCostStrategy$$SpringCGLIB$$0 for tariff with type: SPECIAL_TARIFF.
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.validateAndGetLocation' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.stop.RentalStopperImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.startRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.resumeRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.pauseRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.stopRental' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentals' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.rental.RentalServiceDefaultImpl.getRentalHistoryForUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.updateUserRole' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getAllUsers' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.user.UserServiceDefaultImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getAllScooters' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterServiceDefaultImpl.getScooter' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getScooterModel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.scooter.ScooterModelServiceImpl.getAllScooterModels' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.createTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.deactivateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.activateTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getActiveTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getAllTariffs' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffServiceImpl.getTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.getActiveSubscription' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.canselSubscriptionFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.SubscriptionServiceImpl.subscribeUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.getActiveUserTariff' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.canselTariffFromUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.service.tariff.TariffAssignmentServiceImpl.assignTariffToUser' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:36 [main] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-05-20 23:25:37 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-20 23:25:37 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-20 23:25:37 [main] INFO  r.n.scootrent.ScootRentApplication - Started ScootRentApplication in 12.086 seconds (process running for 13.485)
2025-05-20 23:25:38 [main] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 23:25:39 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 23:25:39 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'admin'.
2025-05-20 23:25:39 [main] DEBUG r.n.s.r.util.BaseRepositoryImpl - Persist new entity User.
2025-05-20 23:25:39 [main] INFO  r.n.s.s.init.PrivilegedUsersSetup - Created default user: 'moderator'.
2025-05-20 23:25:39 [main] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.security.init.PrivilegedUsersSetup.run]
2025-05-20 23:26:27 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-20 23:26:27 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-20 23:26:27 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-05-20 23:26:27 [http-nio-8080-exec-1] DEBUG r.n.s.security.jwt.JwtRequestFilter - Processing authentication for request: /api/auth/sign-in.
2025-05-20 23:26:27 [http-nio-8080-exec-1] DEBUG r.n.s.security.jwt.JwtRequestFilter - No JWT token found in request headers for /api/auth/sign-in.
2025-05-20 23:26:28 [http-nio-8080-exec-1] INFO  r.n.s.c.a.AuthenticationController - Request: POST /signIn authentication user with username: moderator.
2025-05-20 23:26:28 [http-nio-8080-exec-1] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn]
2025-05-20 23:26:28 [http-nio-8080-exec-1] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - Signing up user: moderator.
2025-05-20 23:26:28 [http-nio-8080-exec-1] DEBUG r.n.s.s.a.AuthenticationServiceJwtImpl - User: moderator, successfully signIn.
2025-05-20 23:26:28 [http-nio-8080-exec-1] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [ru.noleg.scootrent.service.auth.AuthenticationServiceJwtImpl.signIn]
2025-05-20 23:26:28 [http-nio-8080-exec-1] INFO  r.n.s.c.a.AuthenticationController - User with username: moderator successfully authenticated.
2025-05-20 23:27:54 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-20 23:27:54 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-20 23:27:54 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-20 23:27:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-20 23:27:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
